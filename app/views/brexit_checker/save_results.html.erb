<% content_for :title, t('brexit_checker.account_signup.title') %>
<% content_for :head do %>
  <% unless params[:page] %>
    <meta name="robots" content="noindex">
  <% end %>
  <%= account_variant.analytics_meta_tag.html_safe %>
<% end %>

<div class="govuk-width-container">
  <%= render 'govuk_publishing_components/components/breadcrumbs', {
    collapse_on_mobile: true,
    breadcrumbs: [
      {
        title: t('brexit_checker.breadcrumbs.home'),
        url: "/"
      },
      {
        title: t('brexit_checker.breadcrumbs.brexit-home'),
        url: "/transition"
      },
      {
        title: t('brexit_checker.breadcrumbs.results'),
        url: transition_checker_results_path(c: criteria_keys)
      }
    ]
  } %>

  <main class="govuk-main-wrapper">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <%= render "govuk_publishing_components/components/heading", {
          text: t('brexit_checker.account_signup.heading'),
          font_size: "xl",
          heading_level: 1,
        } %>

        <p class="govuk-body"><%= t('brexit_checker.account_signup.proposition') %></p>

        <ul class="govuk-list govuk-list--bullet">
          <% t('brexit_checker.account_signup.proposition_list').each do |prop| %>
            <li><%= prop %></li>
          <% end %>
        </ul>

        <%= render "govuk_publishing_components/components/heading", {
          text: t('brexit_checker.account_signup.email.heading'),
          font_size: "m",
          heading_level: 2,
        } %>

        <%= render "govuk_publishing_components/components/action_link", {
          text: t('brexit_checker.account_signup.email.link'),
          href: transition_checker_email_signup_path(c: criteria_keys),
          simple: true,
          margin_bottom: 2,
        } %>

        <p class="govuk-body action-link-subtext"><%= t('brexit_checker.account_signup.email.subtext') %></p>

        <%= render "govuk_publishing_components/components/heading", {
          text: t('brexit_checker.account_signup.account.heading'),
          font_size: "m",
          heading_level: 2,
        } %>

        <%= form_tag Services.accounts_api, id: "account-signup" do %>
          <input type="hidden" name="jwt" value="<%= @account_jwt %>">
          <div class="action-link-button">
            <span class="action-link-button__button-wrapper">
              <button type="submit" class="action-link-button__button"><%= t('brexit_checker.account_signup.account.link') %></button>
            </span>
          </div>
        <% end %>

        <p class="govuk-body action-link-subtext"><%= t('brexit_checker.account_signup.account.subtext') %></p>

        <%= render "govuk_publishing_components/components/inset_text" do %>
          <% t('brexit_checker.account_signup.aim') %>
        <% end %>


        <p class="govuk-body">
          <%= t('brexit_checker.account_signup.or') %>
          <a class="govuk-link" href="<%= transition_checker_save_results_confirm_path(c: criteria_keys) %>">
            <%= t('brexit_checker.account_signup.alternative_path_link_text') %></a>.
        </p>
      </div>
    </div>
  </main>
</div>
