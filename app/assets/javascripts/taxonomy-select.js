function cov_1gmnsv4y58(){var path="/govuk/finder-frontend/app/assets/javascripts.bak/taxonomy-select.js";var hash="359bebbbf03103d71ea5c6905d14e7ef73f40020";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/govuk/finder-frontend/app/assets/javascripts.bak/taxonomy-select.js",statementMap:{"0":{start:{line:7,column:0},end:{line:75,column:10}},"1":{start:{line:10,column:2},end:{line:10,column:35}},"2":{start:{line:11,column:14},end:{line:11,column:26}},"3":{start:{line:14,column:4},end:{line:14,column:26}},"4":{start:{line:15,column:4},end:{line:15,column:44}},"5":{start:{line:18,column:2},end:{line:22,column:3}},"6":{start:{line:19,column:4},end:{line:19,column:31}},"7":{start:{line:20,column:4},end:{line:20,column:29}},"8":{start:{line:21,column:4},end:{line:21,column:32}},"9":{start:{line:24,column:2},end:{line:26,column:3}},"10":{start:{line:25,column:4},end:{line:25,column:44}},"11":{start:{line:28,column:2},end:{line:30,column:3}},"12":{start:{line:29,column:4},end:{line:29,column:44}},"13":{start:{line:32,column:2},end:{line:35,column:3}},"14":{start:{line:33,column:32},end:{line:33,column:61}},"15":{start:{line:34,column:4},end:{line:34,column:61}},"16":{start:{line:37,column:2},end:{line:47,column:3}},"17":{start:{line:38,column:17},end:{line:38,column:58}},"18":{start:{line:40,column:19},end:{line:40,column:35}},"19":{start:{line:42,column:4},end:{line:44,column:6}},"20":{start:{line:43,column:6},end:{line:43,column:45}},"21":{start:{line:43,column:27},end:{line:43,column:43}},"22":{start:{line:46,column:4},end:{line:46,column:27}},"23":{start:{line:49,column:2},end:{line:60,column:3}},"24":{start:{line:50,column:18},end:{line:50,column:20}},"25":{start:{line:52,column:4},end:{line:57,column:6}},"26":{start:{line:53,column:19},end:{line:53,column:52}},"27":{start:{line:55,column:6},end:{line:55,column:45}},"28":{start:{line:56,column:6},end:{line:56,column:32}},"29":{start:{line:59,column:4},end:{line:59,column:18}},"30":{start:{line:62,column:2},end:{line:72,column:3}},"31":{start:{line:63,column:19},end:{line:63,column:53}},"32":{start:{line:65,column:22},end:{line:65,column:49}},"33":{start:{line:67,column:29},end:{line:67,column:91}},"34":{start:{line:69,column:4},end:{line:71,column:5}},"35":{start:{line:70,column:6},end:{line:70,column:30}},"36":{start:{line:74,column:2},end:{line:74,column:39}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:1},end:{line:7,column:2}},loc:{start:{line:7,column:14},end:{line:75,column:1}},line:7},"1":{name:"TaxonomySelect",decl:{start:{line:13,column:11},end:{line:13,column:25}},loc:{start:{line:13,column:36},end:{line:16,column:3}},line:13},"2":{name:"updateTaxonomyFacet",decl:{start:{line:18,column:45},end:{line:18,column:64}},loc:{start:{line:18,column:68},end:{line:22,column:3}},line:18},"3":{name:"$topLevelTaxon",decl:{start:{line:24,column:53},end:{line:24,column:67}},loc:{start:{line:24,column:71},end:{line:26,column:3}},line:24},"4":{name:"$subTaxon",decl:{start:{line:28,column:48},end:{line:28,column:57}},loc:{start:{line:28,column:61},end:{line:30,column:3}},line:28},"5":{name:"disableSubTaxonFacet",decl:{start:{line:32,column:59},end:{line:32,column:79}},loc:{start:{line:32,column:83},end:{line:35,column:3}},line:32},"6":{name:"showRelevantSubTaxons",decl:{start:{line:37,column:60},end:{line:37,column:81}},loc:{start:{line:37,column:85},end:{line:47,column:3}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:42,column:33},end:{line:42,column:34}},loc:{start:{line:42,column:45},end:{line:44,column:5}},line:42},"8":{name:"instantiateOptions",decl:{start:{line:49,column:57},end:{line:49,column:75}},loc:{start:{line:49,column:79},end:{line:60,column:3}},line:49},"9":{name:"(anonymous_9)",decl:{start:{line:52,column:41},end:{line:52,column:42}},loc:{start:{line:52,column:53},end:{line:57,column:5}},line:52},"10":{name:"resetSubTaxonValue",decl:{start:{line:62,column:57},end:{line:62,column:75}},loc:{start:{line:62,column:79},end:{line:72,column:3}},line:62}},branchMap:{"0":{loc:{start:{line:10,column:17},end:{line:10,column:35}},type:"binary-expr",locations:[{start:{line:10,column:17},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:35}}],line:10},"1":{loc:{start:{line:43,column:6},end:{line:43,column:45}},type:"if",locations:[{start:{line:43,column:6},end:{line:43,column:45}},{start:{line:43,column:6},end:{line:43,column:45}}],line:43},"2":{loc:{start:{line:55,column:24},end:{line:55,column:45}},type:"binary-expr",locations:[{start:{line:55,column:24},end:{line:55,column:39}},{start:{line:55,column:43},end:{line:55,column:45}}],line:55},"3":{loc:{start:{line:67,column:29},end:{line:67,column:91}},type:"binary-expr",locations:[{start:{line:67,column:29},end:{line:67,column:37}},{start:{line:67,column:41},end:{line:67,column:91}}],line:67},"4":{loc:{start:{line:69,column:4},end:{line:71,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:71,column:5}},{start:{line:69,column:4},end:{line:71,column:5}}],line:69}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"359bebbbf03103d71ea5c6905d14e7ef73f40020"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1gmnsv4y58=function(){return actualCoverage;};}return actualCoverage;}cov_1gmnsv4y58();cov_1gmnsv4y58().s[0]++;/* eslint-env jquery */ //
// TaxonomySelect adds interactivity to the topic taxonomy facet.
//
(function($){'use strict';cov_1gmnsv4y58().f[0]++;cov_1gmnsv4y58().s[1]++;window.GOVUK=(cov_1gmnsv4y58().b[0][0]++,window.GOVUK)||(cov_1gmnsv4y58().b[0][1]++,{});var GOVUK=(cov_1gmnsv4y58().s[2]++,window.GOVUK);function TaxonomySelect(options){cov_1gmnsv4y58().f[1]++;cov_1gmnsv4y58().s[3]++;this.$el=options.$el;cov_1gmnsv4y58().s[4]++;this.options=this.instantiateOptions();}cov_1gmnsv4y58().s[5]++;TaxonomySelect.prototype.update=function updateTaxonomyFacet(){cov_1gmnsv4y58().f[2]++;cov_1gmnsv4y58().s[6]++;this.disableSubTaxonFacet();cov_1gmnsv4y58().s[7]++;this.resetSubTaxonValue();cov_1gmnsv4y58().s[8]++;this.showRelevantSubTaxons();};cov_1gmnsv4y58().s[9]++;TaxonomySelect.prototype.$topLevelTaxon=function $topLevelTaxon(){cov_1gmnsv4y58().f[3]++;cov_1gmnsv4y58().s[10]++;return this.$el.find('#level_one_taxon');};cov_1gmnsv4y58().s[11]++;TaxonomySelect.prototype.$subTaxon=function $subTaxon(){cov_1gmnsv4y58().f[4]++;cov_1gmnsv4y58().s[12]++;return this.$el.find('#level_two_taxon');};cov_1gmnsv4y58().s[13]++;TaxonomySelect.prototype.disableSubTaxonFacet=function disableSubTaxonFacet(){cov_1gmnsv4y58().f[5]++;var topLevelTaxonSelected=(cov_1gmnsv4y58().s[14]++,!!this.$topLevelTaxon().val());cov_1gmnsv4y58().s[15]++;this.$subTaxon().attr('disabled',!topLevelTaxonSelected);};cov_1gmnsv4y58().s[16]++;TaxonomySelect.prototype.showRelevantSubTaxons=function showRelevantSubTaxons(){cov_1gmnsv4y58().f[6]++;var taxons=(cov_1gmnsv4y58().s[17]++,this.options[this.$topLevelTaxon().val()]);var subtaxon=(cov_1gmnsv4y58().s[18]++,this.$subTaxon());cov_1gmnsv4y58().s[19]++;subtaxon.find('option').each(function(){cov_1gmnsv4y58().f[7]++;cov_1gmnsv4y58().s[20]++;if($(this).val()){cov_1gmnsv4y58().b[1][0]++;cov_1gmnsv4y58().s[21]++;$(this).remove();}else{cov_1gmnsv4y58().b[1][1]++;}});cov_1gmnsv4y58().s[22]++;subtaxon.append(taxons);};cov_1gmnsv4y58().s[23]++;TaxonomySelect.prototype.instantiateOptions=function instantiateOptions(){cov_1gmnsv4y58().f[8]++;var options=(cov_1gmnsv4y58().s[24]++,{});cov_1gmnsv4y58().s[25]++;this.$subTaxon().find('option').each(function(){cov_1gmnsv4y58().f[9]++;var parent=(cov_1gmnsv4y58().s[26]++,$(this).attr('data-topic-parent'));cov_1gmnsv4y58().s[27]++;options[parent]=(cov_1gmnsv4y58().b[2][0]++,options[parent])||(cov_1gmnsv4y58().b[2][1]++,[]);cov_1gmnsv4y58().s[28]++;options[parent].push(this);});cov_1gmnsv4y58().s[29]++;return options;};cov_1gmnsv4y58().s[30]++;TaxonomySelect.prototype.resetSubTaxonValue=function resetSubTaxonValue(){cov_1gmnsv4y58().f[10]++;var selected=(cov_1gmnsv4y58().s[31]++,this.$subTaxon().find(':selected'));var parentTaxon=(cov_1gmnsv4y58().s[32]++,this.$topLevelTaxon().val());var isOrphanedSubTaxon=(cov_1gmnsv4y58().s[33]++,(cov_1gmnsv4y58().b[3][0]++,selected)&&(cov_1gmnsv4y58().b[3][1]++,selected.attr('data-topic-parent')!==parentTaxon));cov_1gmnsv4y58().s[34]++;if(isOrphanedSubTaxon){cov_1gmnsv4y58().b[4][0]++;cov_1gmnsv4y58().s[35]++;this.$subTaxon().val('');}else{cov_1gmnsv4y58().b[4][1]++;}};cov_1gmnsv4y58().s[36]++;GOVUK.TaxonomySelect=TaxonomySelect;})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRheG9ub215LXNlbGVjdC5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiR09WVUsiLCJUYXhvbm9teVNlbGVjdCIsIm9wdGlvbnMiLCIkZWwiLCJpbnN0YW50aWF0ZU9wdGlvbnMiLCJwcm90b3R5cGUiLCJ1cGRhdGUiLCJ1cGRhdGVUYXhvbm9teUZhY2V0IiwiZGlzYWJsZVN1YlRheG9uRmFjZXQiLCJyZXNldFN1YlRheG9uVmFsdWUiLCJzaG93UmVsZXZhbnRTdWJUYXhvbnMiLCIkdG9wTGV2ZWxUYXhvbiIsImZpbmQiLCIkc3ViVGF4b24iLCJ0b3BMZXZlbFRheG9uU2VsZWN0ZWQiLCJ2YWwiLCJhdHRyIiwidGF4b25zIiwic3VidGF4b24iLCJlYWNoIiwicmVtb3ZlIiwiYXBwZW5kIiwicGFyZW50IiwicHVzaCIsInNlbGVjdGVkIiwicGFyZW50VGF4b24iLCJpc09ycGhhbmVkU3ViVGF4b24iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI0akxBZVk7bUhBZlosdUIsQ0FFQTtBQUNBO0FBQ0E7QUFFQSxDQUFDLFNBQVVBLENBQVYsQ0FBYSxDQUNaLGFBRFksZ0RBR1pDLE1BQU0sQ0FBQ0MsS0FBUCxDQUFlLDRCQUFBRCxNQUFNLENBQUNDLEtBQVAsK0JBQWdCLEVBQWhCLENBQWYsQ0FDQSxHQUFJQSxDQUFBQSxLQUFLLDBCQUFHRCxNQUFNLENBQUNDLEtBQVYsQ0FBVCxDQUVBLFFBQVNDLENBQUFBLGNBQVQsQ0FBeUJDLE9BQXpCLENBQWtDLGlEQUNoQyxLQUFLQyxHQUFMLENBQVdELE9BQU8sQ0FBQ0MsR0FBbkIsQ0FEZ0Msd0JBRWhDLEtBQUtELE9BQUwsQ0FBZSxLQUFLRSxrQkFBTCxFQUFmLENBQ0QsQ0FUVyx3QkFXWkgsY0FBYyxDQUFDSSxTQUFmLENBQXlCQyxNQUF6QixDQUFrQyxRQUFTQyxDQUFBQSxtQkFBVCxFQUFnQyxpREFDaEUsS0FBS0Msb0JBQUwsR0FEZ0Usd0JBRWhFLEtBQUtDLGtCQUFMLEdBRmdFLHdCQUdoRSxLQUFLQyxxQkFB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Q0FBcUIsRUFBckIsRUFDRCxDQUZELGlDQUdELENBVkQsQ0F2RFkseUJBbUVaZixLQUFLLENBQUNDLGNBQU4sQ0FBdUJBLGNBQXZCLENBQ0QsQ0FwRUQsRUFvRUcwQixNQXBFSCIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYganF1ZXJ5ICovXG5cbi8vXG4vLyBUYXhvbm9teVNlbGVjdCBhZGRzIGludGVyYWN0aXZpdHkgdG8gdGhlIHRvcGljIHRheG9ub215IGZhY2V0LlxuLy9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHdpbmRvdy5HT1ZVSyA9IHdpbmRvdy5HT1ZVSyB8fCB7fVxuICB2YXIgR09WVUsgPSB3aW5kb3cuR09WVUtcblxuICBmdW5jdGlvbiBUYXhvbm9teVNlbGVjdCAob3B0aW9ucykge1xuICAgIHRoaXMuJGVsID0gb3B0aW9ucy4kZWxcbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmluc3RhbnRpYXRlT3B0aW9ucygpXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlVGF4b25vbXlGYWNldCAoKSB7XG4gICAgdGhpcy5kaXNhYmxlU3ViVGF4b25GYWNldCgpXG4gICAgdGhpcy5yZXNldFN1YlRheG9uVmFsdWUoKVxuICAgIHRoaXMuc2hvd1JlbGV2YW50U3ViVGF4b25zKClcbiAgfVxuXG4gIFRheG9ub215U2VsZWN0LnByb3RvdHlwZS4kdG9wTGV2ZWxUYXhvbiA9IGZ1bmN0aW9uICR0b3BMZXZlbFRheG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy4kZWwuZmluZCgnI2xldmVsX29uZV90YXhvbicpXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUuJHN1YlRheG9uID0gZnVuY3Rpb24gJHN1YlRheG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy4kZWwuZmluZCgnI2xldmVsX3R3b190YXhvbicpXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUuZGlzYWJsZVN1YlRheG9uRmFjZXQgPSBmdW5jdGlvbiBkaXNhYmxlU3ViVGF4b25GYWNldCAoKSB7XG4gICAgdmFyIHRvcExldmVsVGF4b25TZWxlY3RlZCA9ICEhdGhpcy4kdG9wTGV2ZWxUYXhvbigpLnZhbCgpXG4gICAgdGhpcy4kc3ViVGF4b24oKS5hdHRyKCdkaXNhYmxlZCcsICF0b3BMZXZlbFRheG9uU2VsZWN0ZWQpXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUuc2hvd1JlbGV2YW50U3ViVGF4b25zID0gZnVuY3Rpb24gc2hvd1JlbGV2YW50U3ViVGF4b25zICgpIHtcbiAgICB2YXIgdGF4b25zID0gdGhpcy5vcHRpb25zW3RoaXMuJHRvcExldmVsVGF4b24oKS52YWwoKV1cblxuICAgIHZhciBzdWJ0YXhvbiA9IHRoaXMuJHN1YlRheG9uKClcblxuICAgIHN1YnRheG9uLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCQodGhpcykudmFsKCkpIHsgJCh0aGlzKS5yZW1vdmUoKSB9XG4gICAgfSlcblxuICAgIHN1YnRheG9uLmFwcGVuZCh0YXhvbnMpXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUuaW5zdGFudGlhdGVPcHRpb25zID0gZnVuY3Rpb24gaW5zdGFudGlhdGVPcHRpb25zICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHt9XG5cbiAgICB0aGlzLiRzdWJUYXhvbigpLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmVudCA9ICQodGhpcykuYXR0cignZGF0YS10b3BpYy1wYXJlbnQnKVxuXG4gICAgICBvcHRpb25zW3BhcmVudF0gPSBvcHRpb25zW3BhcmVudF0gfHwgW11cbiAgICAgIG9wdGlvbnNbcGFyZW50XS5wdXNoKHRoaXMpXG4gICAgfSlcblxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICBUYXhvbm9teVNlbGVjdC5wcm90b3R5cGUucmVzZXRTdWJUYXhvblZhbHVlID0gZnVuY3Rpb24gcmVzZXRTdWJUYXhvblZhbHVlICgpIHtcbiAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLiRzdWJUYXhvbigpLmZpbmQoJzpzZWxlY3RlZCcpXG5cbiAgICB2YXIgcGFyZW50VGF4b24gPSB0aGlzLiR0b3BMZXZlbFRheG9uKCkudmFsKClcblxuICAgIHZhciBpc09ycGhhbmVkU3ViVGF4b24gPSBzZWxlY3RlZCAmJiBzZWxlY3RlZC5hdHRyKCdkYXRhLXRvcGljLXBhcmVudCcpICE9PSBwYXJlbnRUYXhvblxuXG4gICAgaWYgKGlzT3JwaGFuZWRTdWJUYXhvbikge1xuICAgICAgdGhpcy4kc3ViVGF4b24oKS52YWwoJycpXG4gICAgfVxuICB9XG5cbiAgR09WVUsuVGF4b25vbXlTZWxlY3QgPSBUYXhvbm9teVNlbGVjdFxufSkoalF1ZXJ5KVxuIl19