function cov_yfa2hm1h8(){var path="/govuk/finder-frontend/app/assets/javascripts.bak/modules/mobile-filters-modal.js";var hash="954ae90bf1c92a5c5290852edcc829ea139e2969";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/govuk/finder-frontend/app/assets/javascripts.bak/modules/mobile-filters-modal.js",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:33}},"1":{start:{line:3,column:0},end:{line:3,column:50}},"2":{start:{line:5,column:0},end:{line:143,column:24}},"3":{start:{line:8,column:2},end:{line:38,column:3}},"4":{start:{line:9,column:4},end:{line:9,column:29}},"5":{start:{line:10,column:4},end:{line:10,column:64}},"6":{start:{line:11,column:4},end:{line:11,column:76}},"7":{start:{line:12,column:4},end:{line:12,column:76}},"8":{start:{line:13,column:4},end:{line:13,column:88}},"9":{start:{line:14,column:4},end:{line:14,column:47}},"10":{start:{line:16,column:4},end:{line:16,column:50}},"11":{start:{line:17,column:4},end:{line:17,column:52}},"12":{start:{line:18,column:4},end:{line:18,column:66}},"13":{start:{line:19,column:4},end:{line:19,column:62}},"14":{start:{line:20,column:4},end:{line:20,column:61}},"15":{start:{line:22,column:26},end:{line:24,column:5}},"16":{start:{line:25,column:4},end:{line:27,column:5}},"17":{start:{line:26,column:6},end:{line:26,column:66}},"18":{start:{line:29,column:4},end:{line:33,column:5}},"19":{start:{line:30,column:6},end:{line:32,column:7}},"20":{start:{line:30,column:19},end:{line:30,column:20}},"21":{start:{line:31,column:8},end:{line:31,column:76}},"22":{start:{line:35,column:4},end:{line:37,column:5}},"23":{start:{line:36,column:6},end:{line:36,column:84}},"24":{start:{line:40,column:2},end:{line:55,column:3}},"25":{start:{line:41,column:4},end:{line:43,column:5}},"26":{start:{line:42,column:6},end:{line:42,column:28}},"27":{start:{line:46,column:4},end:{line:46,column:54}},"28":{start:{line:47,column:4},end:{line:47,column:39}},"29":{start:{line:48,column:4},end:{line:48,column:59}},"30":{start:{line:49,column:4},end:{line:49,column:40}},"31":{start:{line:50,column:4},end:{line:50,column:52}},"32":{start:{line:51,column:4},end:{line:51,column:47}},"33":{start:{line:52,column:4},end:{line:52,column:27}},"34":{start:{line:54,column:4},end:{line:54,column:73}},"35":{start:{line:57,column:2},end:{line:72,column:3}},"36":{start:{line:58,column:4},end:{line:60,column:5}},"37":{start:{line:59,column:6},end:{line:59,column:28}},"38":{start:{line:62,column:20},end:{line:62,column:40}},"39":{start:{line:63,column:4},end:{line:63,column:34}},"40":{start:{line:64,column:4},end:{line:64,column:29}},"41":{start:{line:65,column:4},end:{line:65,column:55}},"42":{start:{line:66,column:4},end:{line:66,column:39}},"43":{start:{line:67,column:4},end:{line:67,column:49}},"44":{start:{line:68,column:4},end:{line:68,column:47}},"45":{start:{line:69,column:4},end:{line:69,column:42}},"46":{start:{line:71,column:4},end:{line:71,column:76}},"47":{start:{line:74,column:2},end:{line:76,column:3}},"48":{start:{line:75,column:4},end:{line:75,column:27}},"49":{start:{line:80,column:2},end:{line:104,column:3}},"50":{start:{line:81,column:18},end:{line:81,column:19}},"51":{start:{line:82,column:18},end:{line:82,column:20}},"52":{start:{line:84,column:4},end:{line:103,column:5}},"53":{start:{line:86,column:8},end:{line:96,column:9}},"54":{start:{line:87,column:10},end:{line:90,column:11}},"55":{start:{line:88,column:12},end:{line:88,column:34}},"56":{start:{line:89,column:12},end:{line:89,column:43}},"57":{start:{line:92,column:10},end:{line:95,column:11}},"58":{start:{line:93,column:12},end:{line:93,column:34}},"59":{start:{line:94,column:12},end:{line:94,column:35}},"60":{start:{line:97,column:8},end:{line:97,column:13}},"61":{start:{line:99,column:8},end:{line:99,column:28}},"62":{start:{line:100,column:8},end:{line:100,column:13}},"63":{start:{line:102,column:8},end:{line:102,column:13}},"64":{start:{line:106,column:2},end:{line:140,column:3}},"65":{start:{line:107,column:4},end:{line:109,column:5}},"66":{start:{line:108,column:6},end:{line:108,column:28}},"67":{start:{line:112,column:20},end:{line:112,column:88}},"68":{start:{line:113,column:16},end:{line:113,column:62}},"69":{start:{line:114,column:22},end:{line:114,column:56}},"70":{start:{line:115,column:4},end:{line:115,column:58}},"71":{start:{line:116,column:4},end:{line:136,column:5}},"72":{start:{line:116,column:17},end:{line:116,column:18}},"73":{start:{line:117,column:16},end:{line:117,column:28}},"74":{start:{line:118,column:20},end:{line:118,column:31}},"75":{start:{line:119,column:6},end:{line:135,column:7}},"76":{start:{line:121,column:10},end:{line:125,column:11}},"77":{start:{line:122,column:12},end:{line:122,column:31}},"78":{start:{line:123,column:17},end:{line:125,column:11}},"79":{start:{line:124,column:12},end:{line:124,column:26}},"80":{start:{line:126,column:10},end:{line:126,column:15}},"81":{start:{line:128,column:10},end:{line:128,column:24}},"82":{start:{line:129,column:10},end:{line:129,column:15}},"83":{start:{line:131,column:10},end:{line:131,column:41}},"84":{start:{line:132,column:10},end:{line:132,column:15}},"85":{start:{line:134,column:10},end:{line:134,column:15}},"86":{start:{line:139,column:4},end:{line:139,column:36}},"87":{start:{line:142,column:2},end:{line:142,column:49}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:1},end:{line:5,column:2}},loc:{start:{line:5,column:20},end:{line:143,column:1}},line:5},"1":{name:"MobileFiltersModal",decl:{start:{line:6,column:11},end:{line:6,column:29}},loc:{start:{line:6,column:33},end:{line:6,column:36}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:8,column:39},end:{line:8,column:40}},loc:{start:{line:8,column:58},end:{line:38,column:3}},line:8},"3":{name:"(anonymous_3)",decl:{start:{line:40,column:44},end:{line:40,column:45}},loc:{start:{line:40,column:61},end:{line:55,column:3}},line:40},"4":{name:"(anonymous_4)",decl:{start:{line:57,column:45},end:{line:57,column:46}},loc:{start:{line:57,column:62},end:{line:72,column:3}},line:57},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:50},end:{line:74,column:51}},loc:{start:{line:74,column:62},end:{line:76,column:3}},line:74},"6":{name:"(anonymous_6)",decl:{start:{line:80,column:47},end:{line:80,column:48}},loc:{start:{line:80,column:64},end:{line:104,column:3}},line:80},"7":{name:"(anonymous_7)",decl:{start:{line:106,column:52},end:{line:106,column:53}},loc:{start:{line:106,column:69},end:{line:140,column:3}},line:106}},branchMap:{"0":{loc:{start:{line:2,column:15},end:{line:2,column:33}},type:"binary-expr",locations:[{start:{line:2,column:15},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:33}}],line:2},"1":{loc:{start:{line:3,column:23},end:{line:3,column:49}},type:"binary-expr",locations:[{start:{line:3,column:23},end:{line:3,column:43}},{start:{line:3,column:47},end:{line:3,column:49}}],line:3},"2":{loc:{start:{line:25,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:27,column:5}},{start:{line:25,column:4},end:{line:27,column:5}}],line:25},"3":{loc:{start:{line:29,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:29,column:4},end:{line:33,column:5}},{start:{line:29,column:4},end:{line:33,column:5}}],line:29},"4":{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:35,column:4},end:{line:37,column:5}}],line:35},"5":{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:41,column:4},end:{line:43,column:5}}],line:41},"6":{loc:{start:{line:58,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:58,column:4},end:{line:60,column:5}},{start:{line:58,column:4},end:{line:60,column:5}}],line:58},"7":{loc:{start:{line:65,column:32},end:{line:65,column:48}},type:"binary-expr",locations:[{start:{line:65,column:32},end:{line:65,column:41}},{start:{line:65,column:45},end:{line:65,column:48}}],line:65},"8":{loc:{start:{line:84,column:4},end:{line:103,column:5}},type:"switch",locations:[{start:{line:85,column:6},end:{line:97,column:13}},{start:{line:98,column:6},end:{line:100,column:13}},{start:{line:101,column:6},end:{line:102,column:13}}],line:84},"9":{loc:{start:{line:86,column:8},end:{line:96,column:9}},type:"if",locations:[{start:{line:86,column:8},end:{line:96,column:9}},{start:{line:86,column:8},end:{line:96,column:9}}],line:86},"10":{loc:{start:{line:87,column:10},end:{line:90,column:11}},type:"if",locations:[{start:{line:87,column:10},end:{line:90,column:11}},{start:{line:87,column:10},end:{line:90,column:11}}],line:87},"11":{loc:{start:{line:92,column:10},end:{line:95,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:95,column:11}},{start:{line:92,column:10},end:{line:95,column:11}}],line:92},"12":{loc:{start:{line:107,column:4},end:{line:109,column:5}},type:"if",locations:[{start:{line:107,column:4},end:{line:109,column:5}},{start:{line:107,column:4},end:{line:109,column:5}}],line:107},"13":{loc:{start:{line:119,column:6},end:{line:135,column:7}},type:"switch",locations:[{start:{line:120,column:8},end:{line:126,column:15}},{start:{line:127,column:8},end:{line:129,column:15}},{start:{line:130,column:8},end:{line:132,column:15}},{start:{line:133,column:8},end:{line:134,column:15}}],line:119},"14":{loc:{start:{line:121,column:10},end:{line:125,column:11}},type:"if",locations:[{start:{line:121,column:10},end:{line:125,column:11}},{start:{line:121,column:10},end:{line:125,column:11}}],line:121},"15":{loc:{start:{line:121,column:14},end:{line:121,column:61}},type:"binary-expr",locations:[{start:{line:121,column:14},end:{line:121,column:37}},{start:{line:121,column:41},end:{line:121,column:61}}],line:121},"16":{loc:{start:{line:123,column:17},end:{line:125,column:11}},type:"if",locations:[{start:{line:123,column:17},end:{line:125,column:11}},{start:{line:123,column:17},end:{line:125,column:11}}],line:123},"17":{loc:{start:{line:123,column:21},end:{line:123,column:60}},type:"binary-expr",locations:[{start:{line:123,column:21},end:{line:123,column:40}},{start:{line:123,column:44},end:{line:123,column:60}}],line:123}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"954ae90bf1c92a5c5290852edcc829ea139e2969"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_yfa2hm1h8=function(){return actualCoverage;};}return actualCoverage;}cov_yfa2hm1h8();cov_yfa2hm1h8().s[0]++;/* eslint-env Event, jquery */window.GOVUK=(cov_yfa2hm1h8().b[0][0]++,window.GOVUK)||(cov_yfa2hm1h8().b[0][1]++,{});cov_yfa2hm1h8().s[1]++;window.GOVUK.Modules=(cov_yfa2hm1h8().b[1][0]++,window.GOVUK.Modules)||(cov_yfa2hm1h8().b[1][1]++,{});cov_yfa2hm1h8().s[2]++;(function(Modules){cov_yfa2hm1h8().f[0]++;function MobileFiltersModal(){cov_yfa2hm1h8().f[1]++;}cov_yfa2hm1h8().s[3]++;MobileFiltersModal.prototype.start=function($module){cov_yfa2hm1h8().f[2]++;cov_yfa2hm1h8().s[4]++;this.$module=$module[0];cov_yfa2hm1h8().s[5]++;this.$facetsBox=this.$module.querySelector('.facets__box');cov_yfa2hm1h8().s[6]++;this.$closeTriggers=this.$module.querySelectorAll('.js-close-filters');cov_yfa2hm1h8().s[7]++;this.$showResultsButton=this.$module.querySelector('.js-show-results');cov_yfa2hm1h8().s[8]++;this.$clearFiltersTrigger=this.$module.querySelector('.js-clear-selected-filters');cov_yfa2hm1h8().s[9]++;this.$body=document.querySelector('body');cov_yfa2hm1h8().s[10]++;this.$module.open=this.handleOpen.bind(this);cov_yfa2hm1h8().s[11]++;this.$module.close=this.handleClose.bind(this);cov_yfa2hm1h8().s[12]++;this.$module.clearFilters=this.handleClearFilters.bind(this);cov_yfa2hm1h8().s[13]++;this.$module.ModalFocus=this.handleModalFocus.bind(this);cov_yfa2hm1h8().s[14]++;this.$module.boundKeyDown=this.handleKeyDown.bind(this);var $triggerElement=(cov_yfa2hm1h8().s[15]++,document.querySelector('[data-toggle="mobile-filters-modal"][data-target="'+this.$module.id+'"]'));cov_yfa2hm1h8().s[16]++;if($triggerElement){cov_yfa2hm1h8().b[2][0]++;cov_yfa2hm1h8().s[17]++;$triggerElement.addEventListener('click',this.$module.open);}else{cov_yfa2hm1h8().b[2][1]++;}cov_yfa2hm1h8().s[18]++;if(this.$closeTriggers){cov_yfa2hm1h8().b[3][0]++;cov_yfa2hm1h8().s[19]++;for(var t=(cov_yfa2hm1h8().s[20]++,0);t<this.$closeTriggers.length;t++){cov_yfa2hm1h8().s[21]++;this.$closeTriggers[t].addEventListener('click',this.$module.close);}}else{cov_yfa2hm1h8().b[3][1]++;}cov_yfa2hm1h8().s[22]++;if(this.$clearFiltersTrigger){cov_yfa2hm1h8().b[4][0]++;cov_yfa2hm1h8().s[23]++;this.$clearFiltersTrigger.addEventListener('click',this.$module.clearFilters);}else{cov_yfa2hm1h8().b[4][1]++;}};cov_yfa2hm1h8().s[24]++;MobileFiltersModal.prototype.handleOpen=function(event){cov_yfa2hm1h8().f[3]++;cov_yfa2hm1h8().s[25]++;if(event){cov_yfa2hm1h8().b[5][0]++;cov_yfa2hm1h8().s[26]++;event.preventDefault();}else{cov_yfa2hm1h8().b[5][1]++;}// when our support browser matrix is above iOS 13
// we can use overflow: hidden on the <body> and remove position: fixed
cov_yfa2hm1h8().s[27]++;this.$body.style.top='-'+window.scrollY+'px';cov_yfa2hm1h8().s[28]++;this.$body.style.position='fixed';cov_yfa2hm1h8().s[29]++;this.$focusedElementBeforeOpen=document.activeElement;cov_yfa2hm1h8().s[30]++;this.$module.style.display='block';cov_yfa2hm1h8().s[31]++;this.$facetsBox.setAttribute('aria-modal',true);cov_yfa2hm1h8().s[32]++;this.$facetsBox.setAttribute('tabindex',0);cov_yfa2hm1h8().s[33]++;this.$facetsBox.focus();cov_yfa2hm1h8().s[34]++;document.addEventListener('keydown',this.$module.boundKeyDown,true);};cov_yfa2hm1h8().s[35]++;MobileFiltersModal.prototype.handleClose=function(event){cov_yfa2hm1h8().f[4]++;cov_yfa2hm1h8().s[36]++;if(event){cov_yfa2hm1h8().b[6][0]++;cov_yfa2hm1h8().s[37]++;event.preventDefault();}else{cov_yfa2hm1h8().b[6][1]++;}var offsetTop=(cov_yfa2hm1h8().s[38]++,this.$body.style.top);cov_yfa2hm1h8().s[39]++;this.$body.style.position='';cov_yfa2hm1h8().s[40]++;this.$body.style.top='';cov_yfa2hm1h8().s[41]++;window.scrollTo(0,parseInt((cov_yfa2hm1h8().b[7][0]++,offsetTop)||(cov_yfa2hm1h8().b[7][1]++,'0'))*-1);cov_yfa2hm1h8().s[42]++;this.$module.style.display='none';cov_yfa2hm1h8().s[43]++;this.$facetsBox.removeAttribute('aria-modal');cov_yfa2hm1h8().s[44]++;this.$facetsBox.removeAttribute('tabindex');cov_yfa2hm1h8().s[45]++;this.$focusedElementBeforeOpen.focus();cov_yfa2hm1h8().s[46]++;document.removeEventListener('keydown',this.$module.boundKeyDown,true);};cov_yfa2hm1h8().s[47]++;MobileFiltersModal.prototype.handleModalFocus=function(){cov_yfa2hm1h8().f[5]++;cov_yfa2hm1h8().s[48]++;this.$facetsBox.focus();};// while open, prevent tabbing to outside the dialogue
// and listen for ESC key to close the dialogue
cov_yfa2hm1h8().s[49]++;MobileFiltersModal.prototype.handleKeyDown=function(event){cov_yfa2hm1h8().f[6]++;var KEY_TAB=(cov_yfa2hm1h8().s[50]++,9);var KEY_ESC=(cov_yfa2hm1h8().s[51]++,27);cov_yfa2hm1h8().s[52]++;switch(event.keyCode){case KEY_TAB:cov_yfa2hm1h8().b[8][0]++;cov_yfa2hm1h8().s[53]++;if(event.shiftKey){cov_yfa2hm1h8().b[9][0]++;cov_yfa2hm1h8().s[54]++;if(document.activeElement===this.$facetsBox){cov_yfa2hm1h8().b[10][0]++;cov_yfa2hm1h8().s[55]++;event.preventDefault();cov_yfa2hm1h8().s[56]++;this.$showResultsButton.focus();}else{cov_yfa2hm1h8().b[10][1]++;}}else{cov_yfa2hm1h8().b[9][1]++;cov_yfa2hm1h8().s[57]++;if(document.activeElement===this.$showResultsButton){cov_yfa2hm1h8().b[11][0]++;cov_yfa2hm1h8().s[58]++;event.preventDefault();cov_yfa2hm1h8().s[59]++;this.$facetsBox.focus();}else{cov_yfa2hm1h8().b[11][1]++;}}cov_yfa2hm1h8().s[60]++;break;case KEY_ESC:cov_yfa2hm1h8().b[8][1]++;cov_yfa2hm1h8().s[61]++;this.$module.close();cov_yfa2hm1h8().s[62]++;break;default:cov_yfa2hm1h8().b[8][2]++;cov_yfa2hm1h8().s[63]++;break;}};cov_yfa2hm1h8().s[64]++;MobileFiltersModal.prototype.handleClearFilters=function(event){cov_yfa2hm1h8().f[7]++;cov_yfa2hm1h8().s[65]++;if(event){cov_yfa2hm1h8().b[12][0]++;cov_yfa2hm1h8().s[66]++;event.preventDefault();}else{cov_yfa2hm1h8().b[12][1]++;}// reset all selects, uncheck checkboxes, clear text input values
// and remove the selected count on each facet
var $elements=(cov_yfa2hm1h8().s[67]++,this.$module.querySelectorAll('input, select, .js-selected-counter'));var $form=(cov_yfa2hm1h8().s[68]++,document.querySelector('.js-live-search-form'));var customEvent=(cov_yfa2hm1h8().s[69]++,document.createEvent('HTMLEvents'));cov_yfa2hm1h8().s[70]++;customEvent.initEvent('customFormChange',true,false);cov_yfa2hm1h8().s[71]++;for(var i=(cov_yfa2hm1h8().s[72]++,0);i<$elements.length;i++){var $el=(cov_yfa2hm1h8().s[73]++,$elements[i]);var tagName=(cov_yfa2hm1h8().s[74]++,$el.tagName);cov_yfa2hm1h8().s[75]++;switch(tagName){case'INPUT':cov_yfa2hm1h8().b[13][0]++;cov_yfa2hm1h8().s[76]++;if((cov_yfa2hm1h8().b[15][0]++,$el.type==='checkbox')&&(cov_yfa2hm1h8().b[15][1]++,$el.checked===true)){cov_yfa2hm1h8().b[14][0]++;cov_yfa2hm1h8().s[77]++;$el.checked=false;}else{cov_yfa2hm1h8().b[14][1]++;cov_yfa2hm1h8().s[78]++;if((cov_yfa2hm1h8().b[17][0]++,$el.type==='text')&&(cov_yfa2hm1h8().b[17][1]++,$el.value!=='')){cov_yfa2hm1h8().b[16][0]++;cov_yfa2hm1h8().s[79]++;$el.value='';}else{cov_yfa2hm1h8().b[16][1]++;}}cov_yfa2hm1h8().s[80]++;break;case'SELECT':cov_yfa2hm1h8().b[13][1]++;cov_yfa2hm1h8().s[81]++;$el.value='';cov_yfa2hm1h8().s[82]++;break;case'DIV':cov_yfa2hm1h8().b[13][2]++;cov_yfa2hm1h8().s[83]++;$el.parentNode.removeChild($el);cov_yfa2hm1h8().s[84]++;break;default:cov_yfa2hm1h8().b[13][3]++;cov_yfa2hm1h8().s[85]++;break;}}// fire a single custom change event on the form once all filters have been cleared
// so that we only fetch new search-api data once
cov_yfa2hm1h8().s[86]++;$form.dispatchEvent(customEvent);};cov_yfa2hm1h8().s[87]++;Modules.MobileFiltersModal=MobileFiltersModal;})(window.GOVUK.Modules);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vYmlsZS1maWx0ZXJzLW1vZGFsLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIkdPVlVLIiwiTW9kdWxlcyIsIk1vYmlsZUZpbHRlcnNNb2RhbCIsInByb3RvdHlwZSIsInN0YXJ0IiwiJG1vZHVsZSIsIiRmYWNldHNCb3giLCJxdWVyeVNlbGVjdG9yIiwiJGNsb3NlVHJpZ2dlcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiJHNob3dSZXN1bHRzQnV0dG9uIiwiJGNsZWFyRmlsdGVyc1RyaWdnZXIiLCIkYm9keSIsImRvY3VtZW50Iiwib3BlbiIsImhhbmRsZU9wZW4iLCJiaW5kIiwiY2xvc2UiLCJoYW5kbGVDbG9zZSIsImNsZWFyRmlsdGVycyIsImhhbmRsZUNsZWFyRmlsdGVycyIsIk1vZGFsRm9jdXMiLCJoYW5kbGVNb2RhbEZvY3VzIiwiYm91bmRLZXlEb3duIiwiaGFuZGxlS2V5RG93biIsIiR0cmlnZ2VyRWxlbWVudCIsImlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInQiLCJsZW5ndGgiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3R5bGUiLCJ0b3AiLCJzY3JvbGxZIiwicG9zaXRpb24iLCIkZm9jdXNlZEVsZW1lbnRCZWZvcmVPcGVuIiwiYWN0aXZlRWxlbWVudCIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJmb2N1cyIsIm9mZnNldFRvcCIsInNjcm9sbFRvIiwicGFyc2VJbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiS0VZX1RBQiIsIktFWV9FU0MiLCJrZXlDb2RlIiwic2hpZnRLZXkiLCIkZWxlbWVudHMiLCIkZm9ybSIsImN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJpIiwiJGVsIiwidGFnTmFtZSIsInR5cGUiLCJjaGVja2VkIiwidmFsdWUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJkaXNwYXRjaEV2ZW50Il0sIm1hcHBpbmdzIjoiK21XQWVZO2dIQWZaLDhCQUNB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QVgsQ0FGeUMsd0JBR3pDLE9BQVFBLE9BQVIsRUFDRSxJQUFLLE9BQUwsb0RBQ0UsR0FBSSw0QkFBQUQsR0FBRyxDQUFDRSxJQUFKLEdBQWEsVUFBYiwrQkFBMkJGLEdBQUcsQ0FBQ0csT0FBSixHQUFnQixJQUEzQyxDQUFKLENBQXFELG9EQUNuREgsR0FBRyxDQUFDRyxPQUFKLENBQWMsS0FBZCxDQUNELENBRkQsSUFFTyx1REFBSSw0QkFBQUgsR0FBRyxDQUFDRSxJQUFKLEdBQWEsTUFBYiwrQkFBdUJGLEdBQUcsQ0FBQ0ksS0FBSixHQUFjLEVBQXJDLENBQUosQ0FBNkMsb0RBQ2xESixHQUFHLENBQUNJLEtBQUosQ0FBWSxFQUFaLENBQ0QsQ0FGTSxpQ0FFTixDQUxILHdCQU1FLE1BQ0YsSUFBSyxRQUFMLG9EQUNFSixHQUFHLENBQUNJLEtBQUosQ0FBWSxFQUFaLENBREYsd0JBRUUsTUFDRixJQUFLLEtBQUwsb0RBQ0VKLEdBQUcsQ0FBQ0ssVUFBSixDQUFlQyxXQUFmLENBQTJCTixHQUEzQixFQURGLHdCQUVFLE1BQ0YsMkRBQ0UsTUFmSixDQWlCRCxDQUNEO0FBQ0E7QUFoQ2lFLHdCQWlDakVMLEtBQUssQ0FBQ1ksYUFBTixDQUFvQlgsV0FBcEIsRUFDRCxDQWxDRCxDQXJHa0Isd0JBeUlsQm5ELE9BQU8sQ0FBQ0Msa0JBQVIsQ0FBNkJBLGtCQUE3QixDQUNELENBMUlELEVBMElHSCxNQUFNLENBQUNDLEtBQVAsQ0FBYUMsT0ExSWhCIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWVudiBFdmVudCwganF1ZXJ5ICovXG53aW5kb3cuR09WVUsgPSB3aW5kb3cuR09WVUsgfHwge31cbndpbmRvdy5HT1ZVSy5Nb2R1bGVzID0gd2luZG93LkdPVlVLLk1vZHVsZXMgfHwge307XG5cbihmdW5jdGlvbiAoTW9kdWxlcykge1xuICBmdW5jdGlvbiBNb2JpbGVGaWx0ZXJzTW9kYWwgKCkgeyB9XG5cbiAgTW9iaWxlRmlsdGVyc01vZGFsLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgkbW9kdWxlKSB7XG4gICAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZVswXVxuICAgIHRoaXMuJGZhY2V0c0JveCA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKCcuZmFjZXRzX19ib3gnKVxuICAgIHRoaXMuJGNsb3NlVHJpZ2dlcnMgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLWZpbHRlcnMnKVxuICAgIHRoaXMuJHNob3dSZXN1bHRzQnV0dG9uID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaG93LXJlc3VsdHMnKVxuICAgIHRoaXMuJGNsZWFyRmlsdGVyc1RyaWdnZXIgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvcignLmpzLWNsZWFyLXNlbGVjdGVkLWZpbHRlcnMnKVxuICAgIHRoaXMuJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcblxuICAgIHRoaXMuJG1vZHVsZS5vcGVuID0gdGhpcy5oYW5kbGVPcGVuLmJpbmQodGhpcylcbiAgICB0aGlzLiRtb2R1bGUuY2xvc2UgPSB0aGlzLmhhbmRsZUNsb3NlLmJpbmQodGhpcylcbiAgICB0aGlzLiRtb2R1bGUuY2xlYXJGaWx0ZXJzID0gdGhpcy5oYW5kbGVDbGVhckZpbHRlcnMuYmluZCh0aGlzKVxuICAgIHRoaXMuJG1vZHVsZS5Nb2RhbEZvY3VzID0gdGhpcy5oYW5kbGVNb2RhbEZvY3VzLmJpbmQodGhpcylcbiAgICB0aGlzLiRtb2R1bGUuYm91bmRLZXlEb3duID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcylcblxuICAgIHZhciAkdHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ1tkYXRhLXRvZ2dsZT1cIm1vYmlsZS1maWx0ZXJzLW1vZGFsXCJdW2RhdGEtdGFyZ2V0PVwiJyArIHRoaXMuJG1vZHVsZS5pZCArICdcIl0nXG4gICAgKVxuICAgIGlmICgkdHJpZ2dlckVsZW1lbnQpIHtcbiAgICAgICR0cmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuJG1vZHVsZS5vcGVuKVxuICAgIH1cblxuICAgIGlmICh0aGlzLiRjbG9zZVRyaWdnZXJzKSB7XG4gICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRoaXMuJGNsb3NlVHJpZ2dlcnMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgdGhpcy4kY2xvc2VUcmlnZ2Vyc1t0XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuJG1vZHVsZS5jbG9zZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy4kY2xlYXJGaWx0ZXJzVHJpZ2dlcikge1xuICAgICAgdGhpcy4kY2xlYXJGaWx0ZXJzVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuJG1vZHVsZS5jbGVhckZpbHRlcnMpXG4gICAgfVxuICB9XG5cbiAgTW9iaWxlRmlsdGVyc01vZGFsLnByb3RvdHlwZS5oYW5kbGVPcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICAgIC8vIHdoZW4gb3VyIHN1cHBvcnQgYnJvd3NlciBtYXRyaXggaXMgYWJvdmUgaU9TIDEzXG4gICAgLy8gd2UgY2FuIHVzZSBvdmVyZmxvdzogaGlkZGVuIG9uIHRoZSA8Ym9keT4gYW5kIHJlbW92ZSBwb3NpdGlvbjogZml4ZWRcbiAgICB0aGlzLiRib2R5LnN0eWxlLnRvcCA9ICctJyArIHdpbmRvdy5zY3JvbGxZICsgJ3B4J1xuICAgIHRoaXMuJGJvZHkuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgdGhpcy4kZm9jdXNlZEVsZW1lbnRCZWZvcmVPcGVuID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIHRoaXMuJG1vZHVsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIHRoaXMuJGZhY2V0c0JveC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCB0cnVlKVxuICAgIHRoaXMuJGZhY2V0c0JveC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMClcbiAgICB0aGlzLiRmYWNldHNCb3guZm9jdXMoKVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuJG1vZHVsZS5ib3VuZEtleURvd24sIHRydWUpXG4gIH1cblxuICBNb2JpbGVGaWx0ZXJzTW9kYWwucHJvdG90eXBlLmhhbmRsZUNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFRvcCA9IHRoaXMuJGJvZHkuc3R5bGUudG9wXG4gICAgdGhpcy4kYm9keS5zdHlsZS5wb3NpdGlvbiA9ICcnXG4gICAgdGhpcy4kYm9keS5zdHlsZS50b3AgPSAnJ1xuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBwYXJzZUludChvZmZzZXRUb3AgfHwgJzAnKSAqIC0xKVxuICAgIHRoaXMuJG1vZHVsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgdGhpcy4kZmFjZXRzQm94LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcpXG4gICAgdGhpcy4kZmFjZXRzQm94LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKVxuICAgIHRoaXMuJGZvY3VzZWRFbGVtZW50QmVmb3JlT3Blbi5mb2N1cygpXG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4kbW9kdWxlLmJvdW5kS2V5RG93biwgdHJ1ZSlcbiAgfVxuXG4gIE1vYmlsZUZpbHRlcnNNb2RhbC5wcm90b3R5cGUuaGFuZGxlTW9kYWxGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRmYWNldHNCb3guZm9jdXMoKVxuICB9XG5cbiAgLy8gd2hpbGUgb3BlbiwgcHJldmVudCB0YWJiaW5nIHRvIG91dHNpZGUgdGhlIGRpYWxvZ3VlXG4gIC8vIGFuZCBsaXN0ZW4gZm9yIEVTQyBrZXkgdG8gY2xvc2UgdGhlIGRpYWxvZ3VlXG4gIE1vYmlsZUZpbHRlcnNNb2RhbC5wcm90b3R5cGUuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBLRVlfVEFCID0gOVxuICAgIHZhciBLRVlfRVNDID0gMjdcblxuICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgY2FzZSBLRVlfVEFCOlxuICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy4kZmFjZXRzQm94KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICB0aGlzLiRzaG93UmVzdWx0c0J1dHRvbi5mb2N1cygpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLiRzaG93UmVzdWx0c0J1dHRvbikge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgdGhpcy4kZmFjZXRzQm94LmZvY3VzKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgS0VZX0VTQzpcbiAgICAgICAgdGhpcy4kbW9kdWxlLmNsb3NlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgTW9iaWxlRmlsdGVyc01vZGFsLnByb3RvdHlwZS5oYW5kbGVDbGVhckZpbHRlcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gICAgLy8gcmVzZXQgYWxsIHNlbGVjdHMsIHVuY2hlY2sgY2hlY2tib3hlcywgY2xlYXIgdGV4dCBpbnB1dCB2YWx1ZXNcbiAgICAvLyBhbmQgcmVtb3ZlIHRoZSBzZWxlY3RlZCBjb3VudCBvbiBlYWNoIGZhY2V0XG4gICAgdmFyICRlbGVtZW50cyA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgc2VsZWN0LCAuanMtc2VsZWN0ZWQtY291bnRlcicpXG4gICAgdmFyICRmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWxpdmUtc2VhcmNoLWZvcm0nKVxuICAgIHZhciBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJylcbiAgICBjdXN0b21FdmVudC5pbml0RXZlbnQoJ2N1c3RvbUZvcm1DaGFuZ2UnLCB0cnVlLCBmYWxzZSlcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyICRlbCA9ICRlbGVtZW50c1tpXVxuICAgICAgdmFyIHRhZ05hbWUgPSAkZWwudGFnTmFtZVxuICAgICAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgJ0lOUFVUJzpcbiAgICAgICAgICBpZiAoJGVsLnR5cGUgPT09ICdjaGVja2JveCcgJiYgJGVsLmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICRlbC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKCRlbC50eXBlID09PSAndGV4dCcgJiYgJGVsLnZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgJGVsLnZhbHVlID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnU0VMRUNUJzpcbiAgICAgICAgICAkZWwudmFsdWUgPSAnJ1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0RJVic6XG4gICAgICAgICAgJGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoJGVsKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZmlyZSBhIHNpbmdsZSBjdXN0b20gY2hhbmdlIGV2ZW50IG9uIHRoZSBmb3JtIG9uY2UgYWxsIGZpbHRlcnMgaGF2ZSBiZWVuIGNsZWFyZWRcbiAgICAvLyBzbyB0aGF0IHdlIG9ubHkgZmV0Y2ggbmV3IHNlYXJjaC1hcGkgZGF0YSBvbmNlXG4gICAgJGZvcm0uZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIE1vZHVsZXMuTW9iaWxlRmlsdGVyc01vZGFsID0gTW9iaWxlRmlsdGVyc01vZGFsXG59KSh3aW5kb3cuR09WVUsuTW9kdWxlcylcbiJdfQ==