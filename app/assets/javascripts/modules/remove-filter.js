function cov_1hrp7xd16n(){var path="/govuk/finder-frontend/app/assets/javascripts.bak/modules/remove-filter.js";var hash="f4fd3501bf9a1acf46fb26af4970262f4663cb63";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/govuk/finder-frontend/app/assets/javascripts.bak/modules/remove-filter.js",statementMap:{"0":{start:{line:3,column:0},end:{line:3,column:33}},"1":{start:{line:4,column:0},end:{line:4,column:50}},"2":{start:{line:6,column:0},end:{line:98,column:24}},"3":{start:{line:9,column:2},end:{line:97,column:3}},"4":{start:{line:10,column:36},end:{line:13,column:5}},"5":{start:{line:15,column:4},end:{line:17,column:5}},"6":{start:{line:16,column:6},end:{line:16,column:80}},"7":{start:{line:20,column:6},end:{line:20,column:24}},"8":{start:{line:21,column:6},end:{line:21,column:25}},"9":{start:{line:22,column:16},end:{line:22,column:27}},"10":{start:{line:24,column:29},end:{line:24,column:45}},"11":{start:{line:25,column:30},end:{line:25,column:47}},"12":{start:{line:26,column:30},end:{line:26,column:53}},"13":{start:{line:27,column:30},end:{line:27,column:47}},"14":{start:{line:29,column:19},end:{line:29,column:83}},"15":{start:{line:30,column:6},end:{line:30,column:70}},"16":{start:{line:31,column:6},end:{line:31,column:62}},"17":{start:{line:35,column:24},end:{line:35,column:46}},"18":{start:{line:36,column:22},end:{line:36,column:41}},"19":{start:{line:37,column:23},end:{line:37,column:35}},"20":{start:{line:39,column:6},end:{line:66,column:7}},"21":{start:{line:40,column:8},end:{line:40,column:37}},"22":{start:{line:41,column:8},end:{line:41,column:49}},"23":{start:{line:42,column:13},end:{line:66,column:7}},"24":{start:{line:59,column:23},end:{line:59,column:52}},"25":{start:{line:60,column:21},end:{line:60,column:77}},"26":{start:{line:61,column:21},end:{line:61,column:79}},"27":{start:{line:63,column:8},end:{line:63,column:61}},"28":{start:{line:64,column:13},end:{line:66,column:7}},"29":{start:{line:65,column:8},end:{line:65,column:77}},"30":{start:{line:70,column:21},end:{line:70,column:124}},"31":{start:{line:72,column:6},end:{line:72,column:54}},"32":{start:{line:76,column:21},end:{line:76,column:38}},"33":{start:{line:77,column:19},end:{line:77,column:30}},"34":{start:{line:78,column:18},end:{line:78,column:29}},"35":{start:{line:80,column:6},end:{line:84,column:7}},"36":{start:{line:86,column:6},end:{line:90,column:7}},"37":{start:{line:94,column:6},end:{line:95,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:1},end:{line:6,column:2}},loc:{start:{line:6,column:26},end:{line:98,column:1}},line:6},"1":{name:"RemoveFilter",decl:{start:{line:9,column:40},end:{line:9,column:52}},loc:{start:{line:9,column:56},end:{line:97,column:3}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:15,column:17},end:{line:15,column:18}},loc:{start:{line:15,column:36},end:{line:17,column:5}},line:15},"3":{name:"toggleFilter",decl:{start:{line:19,column:13},end:{line:19,column:25}},loc:{start:{line:19,column:30},end:{line:32,column:5}},line:19},"4":{name:"clearFacet",decl:{start:{line:34,column:13},end:{line:34,column:23}},loc:{start:{line:34,column:71},end:{line:67,column:5}},line:34},"5":{name:"getInput",decl:{start:{line:69,column:13},end:{line:69,column:21}},loc:{start:{line:69,column:79},end:{line:73,column:5}},line:69},"6":{name:"fireRemoveTagTrackingEvent",decl:{start:{line:75,column:13},end:{line:75,column:39}},loc:{start:{line:75,column:67},end:{line:91,column:5}},line:75},"7":{name:"decodeEntities",decl:{start:{line:93,column:13},end:{line:93,column:27}},loc:{start:{line:93,column:37},end:{line:96,column:5}},line:93}},branchMap:{"0":{loc:{start:{line:3,column:15},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:15},end:{line:3,column:27}},{start:{line:3,column:31},end:{line:3,column:33}}],line:3},"1":{loc:{start:{line:4,column:23},end:{line:4,column:49}},type:"binary-expr",locations:[{start:{line:4,column:23},end:{line:4,column:43}},{start:{line:4,column:47},end:{line:4,column:49}}],line:4},"2":{loc:{start:{line:39,column:6},end:{line:66,column:7}},type:"if",locations:[{start:{line:39,column:6},end:{line:66,column:7}},{start:{line:39,column:6},end:{line:66,column:7}}],line:39},"3":{loc:{start:{line:42,column:13},end:{line:66,column:7}},type:"if",locations:[{start:{line:42,column:13},end:{line:66,column:7}},{start:{line:42,column:13},end:{line:66,column:7}}],line:42},"4":{loc:{start:{line:42,column:17},end:{line:42,column:63}},type:"binary-expr",locations:[{start:{line:42,column:17},end:{line:42,column:37}},{start:{line:42,column:41},end:{line:42,column:63}}],line:42},"5":{loc:{start:{line:64,column:13},end:{line:66,column:7}},type:"if",locations:[{start:{line:64,column:13},end:{line:66,column:7}},{start:{line:64,column:13},end:{line:66,column:7}}],line:64},"6":{loc:{start:{line:70,column:21},end:{line:70,column:124}},type:"cond-expr",locations:[{start:{line:70,column:42},end:{line:70,column:83}},{start:{line:70,column:86},end:{line:70,column:124}}],line:70}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f4fd3501bf9a1acf46fb26af4970262f4663cb63"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1hrp7xd16n=function(){return actualCoverage;};}return actualCoverage;}cov_1hrp7xd16n();cov_1hrp7xd16n().s[0]++;/* eslint-env jquery */window.GOVUK=(cov_1hrp7xd16n().b[0][0]++,window.GOVUK)||(cov_1hrp7xd16n().b[0][1]++,{});cov_1hrp7xd16n().s[1]++;window.GOVUK.Modules=(cov_1hrp7xd16n().b[1][0]++,window.GOVUK.Modules)||(cov_1hrp7xd16n().b[1][1]++,{});cov_1hrp7xd16n().s[2]++;(function(global,GOVUK){'use strict';cov_1hrp7xd16n().f[0]++;cov_1hrp7xd16n().s[3]++;GOVUK.Modules.RemoveFilter=function RemoveFilter(){cov_1hrp7xd16n().f[1]++;var onChangeSuppressAnalytics=(cov_1hrp7xd16n().s[4]++,{type:'change',suppressAnalytics:true});cov_1hrp7xd16n().s[5]++;this.start=function(element){cov_1hrp7xd16n().f[2]++;cov_1hrp7xd16n().s[6]++;$(element).on('click','[data-module="remove-filter-link"]',toggleFilter);};function toggleFilter(e){cov_1hrp7xd16n().f[3]++;cov_1hrp7xd16n().s[7]++;e.preventDefault();cov_1hrp7xd16n().s[8]++;e.stopPropagation();var $el=(cov_1hrp7xd16n().s[9]++,$(e.target));var removeFilterName=(cov_1hrp7xd16n().s[10]++,$el.data('name'));var removeFilterValue=(cov_1hrp7xd16n().s[11]++,$el.data('value'));var removeFilterLabel=(cov_1hrp7xd16n().s[12]++,$el.data('track-label'));var removeFilterFacet=(cov_1hrp7xd16n().s[13]++,$el.data('facet'));var $input=(cov_1hrp7xd16n().s[14]++,getInput(removeFilterName,removeFilterValue,removeFilterFacet));cov_1hrp7xd16n().s[15]++;fireRemoveTagTrackingEvent(removeFilterLabel,removeFilterFacet);cov_1hrp7xd16n().s[16]++;clearFacet($input,removeFilterValue,removeFilterFacet);}function clearFacet($input,removeFilterValue,removeFilterFacet){cov_1hrp7xd16n().f[4]++;var elementType=(cov_1hrp7xd16n().s[17]++,$input.prop('tagName'));var inputType=(cov_1hrp7xd16n().s[18]++,$input.prop('type'));var currentVal=(cov_1hrp7xd16n().s[19]++,$input.val());cov_1hrp7xd16n().s[20]++;if(inputType==='checkbox'){cov_1hrp7xd16n().b[2][0]++;cov_1hrp7xd16n().s[21]++;$input.prop('checked',false);cov_1hrp7xd16n().s[22]++;$input.trigger(onChangeSuppressAnalytics);}else{cov_1hrp7xd16n().b[2][1]++;cov_1hrp7xd16n().s[23]++;if((cov_1hrp7xd16n().b[4][0]++,inputType==='text')||(cov_1hrp7xd16n().b[4][1]++,inputType==='search')){cov_1hrp7xd16n().b[3][0]++;/* By padding the haystack with spaces, we can remove the
         * first instance of " $needle ", and this will catch it in
         * the middle of the haystack, at the ends, and when the
         * needle is the haystack; without needing to consider these
         * boundary conditions explicitly.
         *
         * The only caveat is that the matched needle needs replacing
         * with " ", to avoid merging adjacent keywords when it was in
         * the middle of the string, eg:
         *
         * needle = "beta"
         * haystack = "alpha beta gamma"
         *
         * Just removing " beta " from the haystack would result in
         * "alphagamma", which is wrong.
         */var haystack=(cov_1hrp7xd16n().s[24]++,' '+currentVal.trim()+' ');var needle=(cov_1hrp7xd16n().s[25]++,' '+decodeEntities(removeFilterValue.toString())+' ');var newVal=(cov_1hrp7xd16n().s[26]++,haystack.replace(needle,' ').replace(/ {2}/g,' ').trim());cov_1hrp7xd16n().s[27]++;$input.val(newVal).trigger(onChangeSuppressAnalytics);}else{cov_1hrp7xd16n().b[3][1]++;cov_1hrp7xd16n().s[28]++;if(elementType==='OPTION'){cov_1hrp7xd16n().b[5][0]++;cov_1hrp7xd16n().s[29]++;$('#'+removeFilterFacet).val('').trigger(onChangeSuppressAnalytics);}else{cov_1hrp7xd16n().b[5][1]++;}}}}function getInput(removeFilterName,removeFilterValue,removeFilterFacet){cov_1hrp7xd16n().f[5]++;var selector=(cov_1hrp7xd16n().s[30]++,removeFilterName?(cov_1hrp7xd16n().b[6][0]++," input[name='"+removeFilterName+"']"):(cov_1hrp7xd16n().b[6][1]++," [value='"+removeFilterValue+"']"));cov_1hrp7xd16n().s[31]++;return $('#'+removeFilterFacet).find(selector);}function fireRemoveTagTrackingEvent(filterValue,filterFacet){cov_1hrp7xd16n().f[6]++;var category=(cov_1hrp7xd16n().s[32]++,'facetTagRemoved');var action=(cov_1hrp7xd16n().s[33]++,filterFacet);var label=(cov_1hrp7xd16n().s[34]++,filterValue);cov_1hrp7xd16n().s[35]++;GOVUK.SearchAnalytics.trackEvent(category,action,{label:label});cov_1hrp7xd16n().s[36]++;GOVUK.SearchAnalytics.trackEvent(category,action,{label:label,trackerName:'govuk'});}function decodeEntities(string){cov_1hrp7xd16n().f[7]++;cov_1hrp7xd16n().s[37]++;return string.replace(/&quot;/g,'"');}};})(window,window.GOVUK);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbW92ZS1maWx0ZXIuanMiXSwibmFtZXMiOlsid2luZG93IiwiR09WVUsiLCJNb2R1bGVzIiwiZ2xvYmFsIiwiUmVtb3ZlRmlsdGVyIiwib25DaGFuZ2VTdXBwcmVzc0FuYWx5dGljcyIsInR5cGUiLCJzdXBwcmVzc0FuYWx5dGljcyIsInN0YXJ0IiwiZWxlbWVudCIsIiQiLCJvbiIsInRvZ2dsZUZpbHRlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIiRlbCIsInRhcmdldCIsInJlbW92ZUZpbHRlck5hbWUiLCJkYXRhIiwicmVtb3ZlRmlsdGVyVmFsdWUiLCJyZW1vdmVGaWx0ZXJMYWJlbCIsInJlbW92ZUZpbHRlckZhY2V0IiwiJGlucHV0IiwiZ2V0SW5wdXQiLCJmaXJlUmVtb3ZlVGFnVHJhY2tpbmdFdmVudCIsImNsZWFyRmFjZXQiLCJlbGVtZW50VHlwZSIsInByb3AiLCJpbnB1dFR5cGUiLCJjdXJyZW50VmFsIiwidmFsIiwidHJpZ2dlciIsImhheXN0YWNrIiwidHJpbSIsIm5lZWRsZSIsImRlY29kZUVudGl0aWVzIiwidG9TdHJpbmciLCJuZXdWYWwiLCJyZXBsYWNlIiwic2VsZWN0b3IiLCJmaW5kIiwiZmlsdGVyVmFsdWUiLCJmaWx0ZXJGYWNldCIsImNhdGVnb3J5IiwiYWN0aW9uIiwibGFiZWwiLCJTZWFyY2hBbmFseXRpY3MiLCJ0cmFja0V2ZW50IiwidHJhY2tlck5hbWUiLCJzdHJpbmciXSwibWFwcGluZ3MiOiJ3akxBZVk7bUhBZlosdUJBRUFBLE1BQU0sQ0FBQ0MsS0FBUCxDQUFlLDRCQUFBRCxNQUFNLENBQUNDLEtBQVAsK0JBQWdCLEVBQWhCLENBQWYsQyx3QkFDQUQsTUFBTSxDQUFDQyxLQUFQLENBQWFDLE9BQWIsQ0FBdUIsNEJBQUFGLE1BQU0sQ0FBQ0MsS0FBUCxDQUFhQyxPQUFiLCtCQUF3QixFQUF4QixDQUF2QixDLHdCQUVBLENBQUMsU0FBVUMsTUFBVixDQUFrQkYsS0FBbEIsQ0FBeUIs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VCxDQUF5QmMsTUFBekIsQ0FBaUMsa0RBQy9CLE1BQU9BLENBQUFBLE1BQU0sQ0FDVlgsT0FESSxDQUNJLFNBREosQ0FDZSxHQURmLENBQVAsQ0FFRCxDQUNGLENBeEZELENBeUZELENBNUZELEVBNEZHdkMsTUE1RkgsQ0E0RldBLE1BQU0sQ0FBQ0MsS0E1RmxCIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWVudiBqcXVlcnkgKi9cblxud2luZG93LkdPVlVLID0gd2luZG93LkdPVlVLIHx8IHt9XG53aW5kb3cuR09WVUsuTW9kdWxlcyA9IHdpbmRvdy5HT1ZVSy5Nb2R1bGVzIHx8IHt9O1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgR09WVUspIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgR09WVUsuTW9kdWxlcy5SZW1vdmVGaWx0ZXIgPSBmdW5jdGlvbiBSZW1vdmVGaWx0ZXIgKCkge1xuICAgIHZhciBvbkNoYW5nZVN1cHByZXNzQW5hbHl0aWNzID0ge1xuICAgICAgdHlwZTogJ2NoYW5nZScsXG4gICAgICBzdXBwcmVzc0FuYWx5dGljczogdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgJChlbGVtZW50KS5vbignY2xpY2snLCAnW2RhdGEtbW9kdWxlPVwicmVtb3ZlLWZpbHRlci1saW5rXCJdJywgdG9nZ2xlRmlsdGVyKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUZpbHRlciAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICB2YXIgJGVsID0gJChlLnRhcmdldClcblxuICAgICAgdmFyIHJlbW92ZUZpbHRlck5hbWUgPSAkZWwuZGF0YSgnbmFtZScpXG4gICAgICB2YXIgcmVtb3ZlRmlsdGVyVmFsdWUgPSAkZWwuZGF0YSgndmFsdWUnKVxuICAgICAgdmFyIHJlbW92ZUZpbHRlckxhYmVsID0gJGVsLmRhdGEoJ3RyYWNrLWxhYmVsJylcbiAgICAgIHZhciByZW1vdmVGaWx0ZXJGYWNldCA9ICRlbC5kYXRhKCdmYWNldCcpXG5cbiAgICAgIHZhciAkaW5wdXQgPSBnZXRJbnB1dChyZW1vdmVGaWx0ZXJOYW1lLCByZW1vdmVGaWx0ZXJWYWx1ZSwgcmVtb3ZlRmlsdGVyRmFjZXQpXG4gICAgICBmaXJlUmVtb3ZlVGFnVHJhY2tpbmdFdmVudChyZW1vdmVGaWx0ZXJMYWJlbCwgcmVtb3ZlRmlsdGVyRmFjZXQpXG4gICAgICBjbGVhckZhY2V0KCRpbnB1dCwgcmVtb3ZlRmlsdGVyVmFsdWUsIHJlbW92ZUZpbHRlckZhY2V0KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyRmFjZXQgKCRpbnB1dCwgcmVtb3ZlRmlsdGVyVmFsdWUsIHJlbW92ZUZpbHRlckZhY2V0KSB7XG4gICAgICB2YXIgZWxlbWVudFR5cGUgPSAkaW5wdXQucHJvcCgndGFnTmFtZScpXG4gICAgICB2YXIgaW5wdXRUeXBlID0gJGlucHV0LnByb3AoJ3R5cGUnKVxuICAgICAgdmFyIGN1cnJlbnRWYWwgPSAkaW5wdXQudmFsKClcblxuICAgICAgaWYgKGlucHV0VHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAkaW5wdXQucHJvcCgnY2hlY2tlZCcsIGZhbHNlKVxuICAgICAgICAkaW5wdXQudHJpZ2dlcihvbkNoYW5nZVN1cHByZXNzQW5hbHl0aWNzKVxuICAgICAgfSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICd0ZXh0JyB8fCBpbnB1dFR5cGUgPT09ICdzZWFyY2gnKSB7XG4gICAgICAgIC8qIEJ5IHBhZGRpbmcgdGhlIGhheXN0YWNrIHdpdGggc3BhY2VzLCB3ZSBjYW4gcmVtb3ZlIHRoZVxuICAgICAgICAgKiBmaXJzdCBpbnN0YW5jZSBvZiBcIiAkbmVlZGxlIFwiLCBhbmQgdGhpcyB3aWxsIGNhdGNoIGl0IGluXG4gICAgICAgICAqIHRoZSBtaWRkbGUgb2YgdGhlIGhheXN0YWNrLCBhdCB0aGUgZW5kcywgYW5kIHdoZW4gdGhlXG4gICAgICAgICAqIG5lZWRsZSBpcyB0aGUgaGF5c3RhY2s7IHdpdGhvdXQgbmVlZGluZyB0byBjb25zaWRlciB0aGVzZVxuICAgICAgICAgKiBib3VuZGFyeSBjb25kaXRpb25zIGV4cGxpY2l0bHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBvbmx5IGNhdmVhdCBpcyB0aGF0IHRoZSBtYXRjaGVkIG5lZWRsZSBuZWVkcyByZXBsYWNpbmdcbiAgICAgICAgICogd2l0aCBcIiBcIiwgdG8gYXZvaWQgbWVyZ2luZyBhZGphY2VudCBrZXl3b3JkcyB3aGVuIGl0IHdhcyBpblxuICAgICAgICAgKiB0aGUgbWlkZGxlIG9mIHRoZSBzdHJpbmcsIGVnOlxuICAgICAgICAgKlxuICAgICAgICAgKiBuZWVkbGUgPSBcImJldGFcIlxuICAgICAgICAgKiBoYXlzdGFjayA9IFwiYWxwaGEgYmV0YSBnYW1tYVwiXG4gICAgICAgICAqXG4gICAgICAgICAqIEp1c3QgcmVtb3ZpbmcgXCIgYmV0YSBcIiBmcm9tIHRoZSBoYXlzdGFjayB3b3VsZCByZXN1bHQgaW5cbiAgICAgICAgICogXCJhbHBoYWdhbW1hXCIsIHdoaWNoIGlzIHdyb25nLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGhheXN0YWNrID0gJyAnICsgY3VycmVudFZhbC50cmltKCkgKyAnICdcbiAgICAgICAgdmFyIG5lZWRsZSA9ICcgJyArIGRlY29kZUVudGl0aWVzKHJlbW92ZUZpbHRlclZhbHVlLnRvU3RyaW5nKCkpICsgJyAnXG4gICAgICAgIHZhciBuZXdWYWwgPSBoYXlzdGFjay5yZXBsYWNlKG5lZWRsZSwgJyAnKS5yZXBsYWNlKC8gezJ9L2csICcgJykudHJpbSgpXG5cbiAgICAgICAgJGlucHV0LnZhbChuZXdWYWwpLnRyaWdnZXIob25DaGFuZ2VTdXBwcmVzc0FuYWx5dGljcylcbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFR5cGUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICQoJyMnICsgcmVtb3ZlRmlsdGVyRmFjZXQpLnZhbCgnJykudHJpZ2dlcihvbkNoYW5nZVN1cHByZXNzQW5hbHl0aWNzKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldElucHV0IChyZW1vdmVGaWx0ZXJOYW1lLCByZW1vdmVGaWx0ZXJWYWx1ZSwgcmVtb3ZlRmlsdGVyRmFjZXQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IChyZW1vdmVGaWx0ZXJOYW1lKSA/IFwiIGlucHV0W25hbWU9J1wiICsgcmVtb3ZlRmlsdGVyTmFtZSArIFwiJ11cIiA6IFwiIFt2YWx1ZT0nXCIgKyByZW1vdmVGaWx0ZXJWYWx1ZSArIFwiJ11cIlxuXG4gICAgICByZXR1cm4gJCgnIycgKyByZW1vdmVGaWx0ZXJGYWNldCkuZmluZChzZWxlY3RvcilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXJlUmVtb3ZlVGFnVHJhY2tpbmdFdmVudCAoZmlsdGVyVmFsdWUsIGZpbHRlckZhY2V0KSB7XG4gICAgICB2YXIgY2F0ZWdvcnkgPSAnZmFjZXRUYWdSZW1vdmVkJ1xuICAgICAgdmFyIGFjdGlvbiA9IGZpbHRlckZhY2V0XG4gICAgICB2YXIgbGFiZWwgPSBmaWx0ZXJWYWx1ZVxuXG4gICAgICBHT1ZVSy5TZWFyY2hBbmFseXRpY3MudHJhY2tFdmVudChcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgeyBsYWJlbDogbGFiZWwgfVxuICAgICAgKVxuXG4gICAgICBHT1ZVSy5TZWFyY2hBbmFseXRpY3MudHJhY2tFdmVudChcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgeyBsYWJlbDogbGFiZWwsIHRyYWNrZXJOYW1lOiAnZ292dWsnIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNvZGVFbnRpdGllcyAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nXG4gICAgICAgIC5yZXBsYWNlKC8mcXVvdDsvZywgJ1wiJylcbiAgICB9XG4gIH1cbn0pKHdpbmRvdywgd2luZG93LkdPVlVLKVxuIl19