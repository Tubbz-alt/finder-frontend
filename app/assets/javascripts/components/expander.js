function cov_rs2frxy09(){var path="/govuk/finder-frontend/app/assets/javascripts.bak/components/expander.js";var hash="b1842d0ffca19ce2222117a750cd1431c279fdf4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/govuk/finder-frontend/app/assets/javascripts.bak/components/expander.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:33}},"1":{start:{line:2,column:0},end:{line:2,column:50}},"2":{start:{line:4,column:0},end:{line:130,column:24}},"3":{start:{line:12,column:2},end:{line:40,column:3}},"4":{start:{line:13,column:4},end:{line:13,column:29}},"5":{start:{line:14,column:4},end:{line:14,column:59}},"6":{start:{line:15,column:4},end:{line:15,column:61}},"7":{start:{line:16,column:4},end:{line:16,column:93}},"8":{start:{line:17,column:4},end:{line:17,column:30}},"9":{start:{line:19,column:21},end:{line:19,column:78}},"10":{start:{line:21,column:4},end:{line:21,column:49}},"11":{start:{line:23,column:4},end:{line:23,column:62}},"12":{start:{line:24,column:4},end:{line:24,column:65}},"13":{start:{line:25,column:4},end:{line:25,column:76}},"14":{start:{line:27,column:25},end:{line:27,column:46}},"15":{start:{line:28,column:4},end:{line:32,column:5}},"16":{start:{line:29,column:6},end:{line:29,column:48}},"17":{start:{line:31,column:6},end:{line:31,column:32}},"18":{start:{line:35,column:4},end:{line:35,column:91}},"19":{start:{line:38,column:28},end:{line:38,column:60}},"20":{start:{line:39,column:4},end:{line:39,column:23}},"21":{start:{line:42,column:2},end:{line:51,column:3}},"22":{start:{line:43,column:4},end:{line:50,column:5}},"23":{start:{line:43,column:17},end:{line:43,column:18}},"24":{start:{line:44,column:16},end:{line:44,column:47}},"25":{start:{line:46,column:6},end:{line:49,column:7}},"26":{start:{line:47,column:8},end:{line:47,column:72}},"27":{start:{line:48,column:8},end:{line:48,column:71}},"28":{start:{line:53,column:2},end:{line:60,column:3}},"29":{start:{line:54,column:20},end:{line:54,column:22}},"30":{start:{line:57,column:4},end:{line:59,column:5}},"31":{start:{line:58,column:6},end:{line:58,column:32}},"32":{start:{line:62,column:2},end:{line:74,column:3}},"33":{start:{line:63,column:21},end:{line:63,column:43}},"34":{start:{line:64,column:18},end:{line:64,column:50}},"35":{start:{line:66,column:4},end:{line:66,column:51}},"36":{start:{line:67,column:4},end:{line:67,column:38}},"37":{start:{line:68,column:4},end:{line:68,column:42}},"38":{start:{line:69,column:4},end:{line:69,column:51}},"39":{start:{line:70,column:4},end:{line:70,column:75}},"40":{start:{line:71,column:4},end:{line:71,column:34}},"41":{start:{line:73,column:4},end:{line:73,column:63}},"42":{start:{line:76,column:2},end:{line:84,column:3}},"43":{start:{line:77,column:4},end:{line:83,column:5}},"44":{start:{line:78,column:6},end:{line:78,column:60}},"45":{start:{line:79,column:6},end:{line:79,column:69}},"46":{start:{line:81,column:6},end:{line:81,column:61}},"47":{start:{line:82,column:6},end:{line:82,column:72}},"48":{start:{line:86,column:2},end:{line:92,column:3}},"49":{start:{line:87,column:27},end:{line:87,column:57}},"50":{start:{line:88,column:4},end:{line:88,column:70}},"51":{start:{line:89,column:4},end:{line:89,column:57}},"52":{start:{line:90,column:4},end:{line:90,column:47}},"53":{start:{line:91,column:4},end:{line:91,column:96}},"54":{start:{line:94,column:2},end:{line:106,column:3}},"55":{start:{line:95,column:25},end:{line:95,column:46}},"56":{start:{line:96,column:32},end:{line:96,column:82}},"57":{start:{line:97,column:4},end:{line:105,column:5}},"58":{start:{line:98,column:6},end:{line:102,column:7}},"59":{start:{line:99,column:8},end:{line:99,column:56}},"60":{start:{line:101,column:8},end:{line:101,column:50}},"61":{start:{line:103,column:11},end:{line:105,column:5}},"62":{start:{line:104,column:6},end:{line:104,column:73}},"63":{start:{line:108,column:2},end:{line:117,column:3}},"64":{start:{line:109,column:4},end:{line:109,column:33}},"65":{start:{line:110,column:16},end:{line:110,column:44}},"66":{start:{line:111,column:25},end:{line:111,column:30}},"67":{start:{line:112,column:4},end:{line:114,column:5}},"68":{start:{line:113,column:6},end:{line:113,column:42}},"69":{start:{line:116,column:4},end:{line:116,column:25}},"70":{start:{line:119,column:2},end:{line:127,column:3}},"71":{start:{line:120,column:4},end:{line:120,column:30}},"72":{start:{line:121,column:15},end:{line:121,column:19}},"73":{start:{line:122,column:4},end:{line:126,column:5}},"74":{start:{line:122,column:17},end:{line:122,column:18}},"75":{start:{line:123,column:6},end:{line:125,column:7}},"76":{start:{line:124,column:8},end:{line:124,column:37}},"77":{start:{line:129,column:2},end:{line:129,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:1},end:{line:4,column:2}},loc:{start:{line:4,column:20},end:{line:130,column:1}},line:4},"1":{name:"Expander",decl:{start:{line:5,column:11},end:{line:5,column:19}},loc:{start:{line:5,column:23},end:{line:5,column:25}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:29},end:{line:12,column:30}},loc:{start:{line:12,column:48},end:{line:40,column:3}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:42,column:40},end:{line:42,column:41}},loc:{start:{line:42,column:53},end:{line:51,column:3}},line:42},"4":{name:"(anonymous_4)",decl:{start:{line:53,column:40},end:{line:53,column:41}},loc:{start:{line:53,column:53},end:{line:60,column:3}},line:53},"5":{name:"(anonymous_5)",decl:{start:{line:62,column:52},end:{line:62,column:53}},loc:{start:{line:62,column:72},end:{line:74,column:3}},line:62},"6":{name:"(anonymous_6)",decl:{start:{line:76,column:37},end:{line:76,column:38}},loc:{start:{line:76,column:50},end:{line:84,column:3}},line:76},"7":{name:"attachSelectedCounter",decl:{start:{line:86,column:54},end:{line:86,column:75}},loc:{start:{line:86,column:93},end:{line:92,column:3}},line:86},"8":{name:"updateSelectedCount",decl:{start:{line:94,column:52},end:{line:94,column:71}},loc:{start:{line:94,column:75},end:{line:106,column:3}},line:94},"9":{name:"selectedString",decl:{start:{line:108,column:47},end:{line:108,column:61}},loc:{start:{line:108,column:65},end:{line:117,column:3}},line:108},"10":{name:"getAllSelectedElements",decl:{start:{line:119,column:55},end:{line:119,column:77}},loc:{start:{line:119,column:81},end:{line:127,column:3}},line:119}},branchMap:{"0":{loc:{start:{line:1,column:15},end:{line:1,column:33}},type:"binary-expr",locations:[{start:{line:1,column:15},end:{line:1,column:27}},{start:{line:1,column:31},end:{line:1,column:33}}],line:1},"1":{loc:{start:{line:2,column:23},end:{line:2,column:49}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:43}},{start:{line:2,column:47},end:{line:2,column:49}}],line:2},"2":{loc:{start:{line:28,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:32,column:5}},{start:{line:28,column:4},end:{line:32,column:5}}],line:28},"3":{loc:{start:{line:46,column:6},end:{line:49,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:49,column:7}},{start:{line:46,column:6},end:{line:49,column:7}}],line:46},"4":{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:57,column:4},end:{line:59,column:5}}],line:57},"5":{loc:{start:{line:57,column:8},end:{line:57,column:54}},type:"binary-expr",locations:[{start:{line:57,column:8},end:{line:57,column:31}},{start:{line:57,column:35},end:{line:57,column:54}}],line:57},"6":{loc:{start:{line:77,column:4},end:{line:83,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:83,column:5}},{start:{line:77,column:4},end:{line:83,column:5}}],line:77},"7":{loc:{start:{line:97,column:4},end:{line:105,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:105,column:5}},{start:{line:97,column:4},end:{line:105,column:5}}],line:97},"8":{loc:{start:{line:98,column:6},end:{line:102,column:7}},type:"if",locations:[{start:{line:98,column:6},end:{line:102,column:7}},{start:{line:98,column:6},end:{line:102,column:7}}],line:98},"9":{loc:{start:{line:103,column:11},end:{line:105,column:5}},type:"if",locations:[{start:{line:103,column:11},end:{line:105,column:5}},{start:{line:103,column:11},end:{line:105,column:5}}],line:103},"10":{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:112,column:4},end:{line:114,column:5}}],line:112},"11":{loc:{start:{line:123,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:125,column:7}},{start:{line:123,column:6},end:{line:125,column:7}}],line:123}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b1842d0ffca19ce2222117a750cd1431c279fdf4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_rs2frxy09=function(){return actualCoverage;};}return actualCoverage;}cov_rs2frxy09();cov_rs2frxy09().s[0]++;window.GOVUK=(cov_rs2frxy09().b[0][0]++,window.GOVUK)||(cov_rs2frxy09().b[0][1]++,{});cov_rs2frxy09().s[1]++;window.GOVUK.Modules=(cov_rs2frxy09().b[1][0]++,window.GOVUK.Modules)||(cov_rs2frxy09().b[1][1]++,{});// if this ; is omitted, none of this JS runs :(
cov_rs2frxy09().s[2]++;(function(Modules){cov_rs2frxy09().f[0]++;function Expander(){cov_rs2frxy09().f[1]++;}/* This JavaScript provides two functional enhancements to the expander component:
    1) A count that shows how many items have been used in the expander container
    2) Open/closing of the content
  */cov_rs2frxy09().s[3]++;Expander.prototype.start=function($module){cov_rs2frxy09().f[2]++;cov_rs2frxy09().s[4]++;this.$module=$module[0];// this is the expander element
cov_rs2frxy09().s[5]++;this.$toggle=this.$module.querySelector('.js-toggle');cov_rs2frxy09().s[6]++;this.$content=this.$module.querySelector('.js-content');cov_rs2frxy09().s[7]++;this.$allInteractiveElements=this.$content.querySelectorAll('select, input[type=text]');cov_rs2frxy09().s[8]++;this.selectedElements=[];var openOnLoad=(cov_rs2frxy09().s[9]++,this.$module.getAttribute('data-open-on-load')==='true');cov_rs2frxy09().s[10]++;this.replaceHeadingSpanWithButton(openOnLoad);cov_rs2frxy09().s[11]++;this.$module.toggleContent=this.toggleContent.bind(this);cov_rs2frxy09().s[12]++;this.$toggleButton=this.$module.querySelector('.js-button');cov_rs2frxy09().s[13]++;this.$toggleButton.addEventListener('click',this.$module.toggleContent);var selectedString=(cov_rs2frxy09().s[14]++,this.selectedString());cov_rs2frxy09().s[15]++;if(selectedString){cov_rs2frxy09().b[2][0]++;cov_rs2frxy09().s[16]++;this.attachSelectedCounter(selectedString);// expand the content
cov_rs2frxy09().s[17]++;this.$toggleButton.click();}else{cov_rs2frxy09().b[2][1]++;}// listen for the change event
cov_rs2frxy09().s[18]++;$module.on('change','select, input[type="text"]',this.updateSelectedCount.bind(this));// Attach listener function to update selected count
var boundChangeEvents=(cov_rs2frxy09().s[19]++,this.bindChangeEvents.bind(this));cov_rs2frxy09().s[20]++;boundChangeEvents();};cov_rs2frxy09().s[21]++;Expander.prototype.bindChangeEvents=function(e){cov_rs2frxy09().f[3]++;cov_rs2frxy09().s[22]++;for(var i=(cov_rs2frxy09().s[23]++,0);i<this.$allInteractiveElements.length;i++){var $el=(cov_rs2frxy09().s[24]++,this.$allInteractiveElements[i]);// but for inputs we need both change and enter key event
cov_rs2frxy09().s[25]++;if($el.tagName==='INPUT'){cov_rs2frxy09().b[3][0]++;cov_rs2frxy09().s[26]++;$el.addEventListener('change',this.handleInputEvent.bind(this));cov_rs2frxy09().s[27]++;$el.addEventListener('keyup',this.handleInputEvent.bind(this));}else{cov_rs2frxy09().b[3][1]++;}}};cov_rs2frxy09().s[28]++;Expander.prototype.handleInputEvent=function(e){cov_rs2frxy09().f[4]++;var ENTER_KEY=(cov_rs2frxy09().s[29]++,13);// we only want to fire when ENTER key is pressed or
// user selected a different element
cov_rs2frxy09().s[30]++;if((cov_rs2frxy09().b[5][0]++,e.keyCode===ENTER_KEY)||(cov_rs2frxy09().b[5][1]++,e.type==='change')){cov_rs2frxy09().b[4][0]++;cov_rs2frxy09().s[31]++;this.updateSelectedCount();}else{cov_rs2frxy09().b[4][1]++;}};cov_rs2frxy09().s[32]++;Expander.prototype.replaceHeadingSpanWithButton=function(expanded){cov_rs2frxy09().f[5]++;var toggleHtml=(cov_rs2frxy09().s[33]++,this.$toggle.innerHTML);var $button=(cov_rs2frxy09().s[34]++,document.createElement('button'));cov_rs2frxy09().s[35]++;$button.classList.add('app-c-expander__button');cov_rs2frxy09().s[36]++;$button.classList.add('js-button');cov_rs2frxy09().s[37]++;$button.setAttribute('type','button');cov_rs2frxy09().s[38]++;$button.setAttribute('aria-expanded',expanded);cov_rs2frxy09().s[39]++;$button.setAttribute('aria-controls',this.$content.getAttribute('id'));cov_rs2frxy09().s[40]++;$button.innerHTML=toggleHtml;cov_rs2frxy09().s[41]++;this.$toggle.parentNode.replaceChild($button,this.$toggle);};cov_rs2frxy09().s[42]++;Expander.prototype.toggleContent=function(e){cov_rs2frxy09().f[6]++;cov_rs2frxy09().s[43]++;if(this.$toggleButton.getAttribute('aria-expanded')==='false'){cov_rs2frxy09().b[6][0]++;cov_rs2frxy09().s[44]++;this.$toggleButton.setAttribute('aria-expanded',true);cov_rs2frxy09().s[45]++;this.$content.classList.add('app-c-expander__content--visible');}else{cov_rs2frxy09().b[6][1]++;cov_rs2frxy09().s[46]++;this.$toggleButton.setAttribute('aria-expanded',false);cov_rs2frxy09().s[47]++;this.$content.classList.remove('app-c-expander__content--visible');}};cov_rs2frxy09().s[48]++;Expander.prototype.attachSelectedCounter=function attachSelectedCounter(selectedString){cov_rs2frxy09().f[7]++;var $selectedCounter=(cov_rs2frxy09().s[49]++,document.createElement('span'));cov_rs2frxy09().s[50]++;$selectedCounter.classList.add('app-c-expander__selected-counter');cov_rs2frxy09().s[51]++;$selectedCounter.classList.add('js-selected-counter');cov_rs2frxy09().s[52]++;$selectedCounter.innerHTML=selectedString;cov_rs2frxy09().s[53]++;this.$toggleButton.parentNode.insertBefore($selectedCounter,this.$toggleButton.nextSibling);};cov_rs2frxy09().s[54]++;Expander.prototype.updateSelectedCount=function updateSelectedCount(){cov_rs2frxy09().f[8]++;var selectedString=(cov_rs2frxy09().s[55]++,this.selectedString());var selectedStringElement=(cov_rs2frxy09().s[56]++,this.$module.querySelector('.js-selected-counter'));cov_rs2frxy09().s[57]++;if(selectedString){cov_rs2frxy09().b[7][0]++;cov_rs2frxy09().s[58]++;if(selectedStringElement){cov_rs2frxy09().b[8][0]++;cov_rs2frxy09().s[59]++;selectedStringElement.innerHTML=selectedString;}else{cov_rs2frxy09().b[8][1]++;cov_rs2frxy09().s[60]++;this.attachSelectedCounter(selectedString);}}else{cov_rs2frxy09().b[7][1]++;cov_rs2frxy09().s[61]++;if(selectedStringElement){cov_rs2frxy09().b[9][0]++;cov_rs2frxy09().s[62]++;selectedStringElement.parentNode.removeChild(selectedStringElement);}else{cov_rs2frxy09().b[9][1]++;}}};cov_rs2frxy09().s[63]++;Expander.prototype.selectedString=function selectedString(){cov_rs2frxy09().f[9]++;cov_rs2frxy09().s[64]++;this.getAllSelectedElements();var count=(cov_rs2frxy09().s[65]++,this.selectedElements.length);var selectedString=(cov_rs2frxy09().s[66]++,false);cov_rs2frxy09().s[67]++;if(count>0){cov_rs2frxy09().b[10][0]++;cov_rs2frxy09().s[68]++;selectedString=count+' selected';}else{cov_rs2frxy09().b[10][1]++;}cov_rs2frxy09().s[69]++;return selectedString;};cov_rs2frxy09().s[70]++;Expander.prototype.getAllSelectedElements=function getAllSelectedElements(){cov_rs2frxy09().f[10]++;cov_rs2frxy09().s[71]++;this.selectedElements=[];var that=(cov_rs2frxy09().s[72]++,this);cov_rs2frxy09().s[73]++;for(var i=(cov_rs2frxy09().s[74]++,0);i<this.$allInteractiveElements.length;i++){cov_rs2frxy09().s[75]++;if(this.$allInteractiveElements[i].value.length>0){cov_rs2frxy09().b[11][0]++;cov_rs2frxy09().s[76]++;that.selectedElements.push(i);}else{cov_rs2frxy09().b[11][1]++;}}};cov_rs2frxy09().s[77]++;Modules.Expander=Expander;})(window.GOVUK.Modules);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGFuZGVyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIkdPVlVLIiwiTW9kdWxlcyIsIkV4cGFuZGVyIiwicHJvdG90eXBlIiwic3RhcnQiLCIkbW9kdWxlIiwiJHRvZ2dsZSIsInF1ZXJ5U2VsZWN0b3IiLCIkY29udGVudCIsIiRhbGxJbnRlcmFjdGl2ZUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInNlbGVjdGVkRWxlbWVudHMiLCJvcGVuT25Mb2FkIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZUhlYWRpbmdTcGFuV2l0aEJ1dHRvbiIsInRvZ2dsZUNvbnRlbnQiLCJiaW5kIiwiJHRvZ2dsZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZWxlY3RlZFN0cmluZyIsImF0dGFjaFNlbGVjdGVkQ291bnRlciIsImNsaWNrIiwib24iLCJ1cGRhdGVTZWxlY3RlZENvdW50IiwiYm91bmRDaGFuZ2VFdmVudHMiLCJiaW5kQ2hhbmdlRXZlbnRzIiwiZSIsImkiLCJsZW5ndGgiLCIkZWwiLCJ0YWdOYW1lIiwiaGFuZGxlSW5wdXRFdmVudCIsIkVOVEVSX0tFWSIsImtleUNvZGUiLCJ0eXBlIiwiZXhwYW5kZWQiLCJ0b2dnbGVIdG1sIiwiaW5uZXJIVE1MIiwiJGJ1dHRvbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZW1vdmUiLCIkc2VsZWN0ZWRDb3VudGVyIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJzZWxlY3RlZFN0cmluZ0VsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldEFsbFNlbGVjdGVkRWxlbWVudHMiLCJjb3VudCIsInRoYXQiLCJ2YWx1ZSIsInB1c2giXSwibWFwcGluZ3MiOiIrL1NBZVk7Z0hBZlpBLE1BQU0sQ0FBQ0MsS0FBUCxDQUFlLDJCQUFBRCxNQUFNLENBQUNDLEtBQVAsOEJBQWdCLEVBQWhCLENB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LElBQUssR0FBSTNCLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFWLENBQWdCQSxDQUFDLENBQUcsS0FBS2xCLHVCQUFMLENBQTZCbUIsTUFBakQsQ0FBeURELENBQUMsRUFBMUQsQ0FBOEQseUJBQzVELEdBQUksS0FBS2xCLHVCQUFMLENBQTZCa0IsQ0FBN0IsRUFBZ0M0QixLQUFoQyxDQUFzQzNCLE1BQXRDLENBQStDLENBQW5ELENBQXNELG9EQUNwRDBCLElBQUksQ0FBQzNDLGdCQUFMLENBQXNCNkMsSUFBdEIsQ0FBMkI3QixDQUEzQixFQUNELENBRkQsaUNBR0QsQ0FDRixDQVJELENBbkhrQix3QkE2SGxCMUIsT0FBTyxDQUFDQyxRQUFSLENBQW1CQSxRQUFuQixDQUNELENBOUhELEVBOEhHSCxNQUFNLENBQUNDLEtBQVAsQ0FBYUMsT0E5SGhCIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LkdPVlVLID0gd2luZG93LkdPVlVLIHx8IHt9XG53aW5kb3cuR09WVUsuTW9kdWxlcyA9IHdpbmRvdy5HT1ZVSy5Nb2R1bGVzIHx8IHt9OyAvLyBpZiB0aGlzIDsgaXMgb21pdHRlZCwgbm9uZSBvZiB0aGlzIEpTIHJ1bnMgOihcblxuKGZ1bmN0aW9uIChNb2R1bGVzKSB7XG4gIGZ1bmN0aW9uIEV4cGFuZGVyICgpIHt9XG5cbiAgLyogVGhpcyBKYXZhU2NyaXB0IHByb3ZpZGVzIHR3byBmdW5jdGlvbmFsIGVuaGFuY2VtZW50cyB0byB0aGUgZXhwYW5kZXIgY29tcG9uZW50OlxuICAgIDEpIEEgY291bnQgdGhhdCBzaG93cyBob3cgbWFueSBpdGVtcyBoYXZlIGJlZW4gdXNlZCBpbiB0aGUgZXhwYW5kZXIgY29udGFpbmVyXG4gICAgMikgT3Blbi9jbG9zaW5nIG9mIHRoZSBjb250ZW50XG4gICovXG5cbiAgRXhwYW5kZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCRtb2R1bGUpIHtcbiAgICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlWzBdIC8vIHRoaXMgaXMgdGhlIGV4cGFuZGVyIGVsZW1lbnRcbiAgICB0aGlzLiR0b2dnbGUgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvcignLmpzLXRvZ2dsZScpXG4gICAgdGhpcy4kY29udGVudCA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKCcuanMtY29udGVudCcpXG4gICAgdGhpcy4kYWxsSW50ZXJhY3RpdmVFbGVtZW50cyA9IHRoaXMuJGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0LCBpbnB1dFt0eXBlPXRleHRdJylcbiAgICB0aGlzLnNlbGVjdGVkRWxlbWVudHMgPSBbXVxuXG4gICAgdmFyIG9wZW5PbkxvYWQgPSB0aGlzLiRtb2R1bGUuZ2V0QXR0cmlidXRlKCdkYXRhLW9wZW4tb24tbG9hZCcpID09PSAndHJ1ZSdcblxuICAgIHRoaXMucmVwbGFjZUhlYWRpbmdTcGFuV2l0aEJ1dHRvbihvcGVuT25Mb2FkKVxuXG4gICAgdGhpcy4kbW9kdWxlLnRvZ2dsZUNvbnRlbnQgPSB0aGlzLnRvZ2dsZUNvbnRlbnQuYmluZCh0aGlzKVxuICAgIHRoaXMuJHRvZ2dsZUJ1dHRvbiA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKCcuanMtYnV0dG9uJylcbiAgICB0aGlzLiR0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLiRtb2R1bGUudG9nZ2xlQ29udGVudClcblxuICAgIHZhciBzZWxlY3RlZFN0cmluZyA9IHRoaXMuc2VsZWN0ZWRTdHJpbmcoKVxuICAgIGlmIChzZWxlY3RlZFN0cmluZykge1xuICAgICAgdGhpcy5hdHRhY2hTZWxlY3RlZENvdW50ZXIoc2VsZWN0ZWRTdHJpbmcpXG4gICAgICAvLyBleHBhbmQgdGhlIGNvbnRlbnRcbiAgICAgIHRoaXMuJHRvZ2dsZUJ1dHRvbi5jbGljaygpXG4gICAgfVxuXG4gICAgLy8gbGlzdGVuIGZvciB0aGUgY2hhbmdlIGV2ZW50XG4gICAgJG1vZHVsZS5vbignY2hhbmdlJywgJ3NlbGVjdCwgaW5wdXRbdHlwZT1cInRleHRcIl0nLCB0aGlzLnVwZGF0ZVNlbGVjdGVkQ291bnQuYmluZCh0aGlzKSlcblxuICAgIC8vIEF0dGFjaCBsaXN0ZW5lciBmdW5jdGlvbiB0byB1cGRhdGUgc2VsZWN0ZWQgY291bnRcbiAgICB2YXIgYm91bmRDaGFuZ2VFdmVudHMgPSB0aGlzLmJpbmRDaGFuZ2VFdmVudHMuYmluZCh0aGlzKVxuICAgIGJvdW5kQ2hhbmdlRXZlbnRzKClcbiAgfVxuXG4gIEV4cGFuZGVyLnByb3RvdHlwZS5iaW5kQ2hhbmdlRXZlbnRzID0gZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGFsbEludGVyYWN0aXZlRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciAkZWwgPSB0aGlzLiRhbGxJbnRlcmFjdGl2ZUVsZW1lbnRzW2ldXG4gICAgICAvLyBidXQgZm9yIGlucHV0cyB3ZSBuZWVkIGJvdGggY2hhbmdlIGFuZCBlbnRlciBrZXkgZXZlbnRcbiAgICAgIGlmICgkZWwudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICAkZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVJbnB1dEV2ZW50LmJpbmQodGhpcykpXG4gICAgICAgICRlbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlSW5wdXRFdmVudC5iaW5kKHRoaXMpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEV4cGFuZGVyLnByb3RvdHlwZS5oYW5kbGVJbnB1dEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgRU5URVJfS0VZID0gMTNcbiAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gZmlyZSB3aGVuIEVOVEVSIGtleSBpcyBwcmVzc2VkIG9yXG4gICAgLy8gdXNlciBzZWxlY3RlZCBhIGRpZmZlcmVudCBlbGVtZW50XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gRU5URVJfS0VZIHx8IGUudHlwZSA9PT0gJ2NoYW5nZScpIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDb3VudCgpXG4gICAgfVxuICB9XG5cbiAgRXhwYW5kZXIucHJvdG90eXBlLnJlcGxhY2VIZWFkaW5nU3BhbldpdGhCdXR0b24gPSBmdW5jdGlvbiAoZXhwYW5kZWQpIHtcbiAgICB2YXIgdG9nZ2xlSHRtbCA9IHRoaXMuJHRvZ2dsZS5pbm5lckhUTUxcbiAgICB2YXIgJGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG5cbiAgICAkYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FwcC1jLWV4cGFuZGVyX19idXR0b24nKVxuICAgICRidXR0b24uY2xhc3NMaXN0LmFkZCgnanMtYnV0dG9uJylcbiAgICAkYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgICRidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgZXhwYW5kZWQpXG4gICAgJGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCB0aGlzLiRjb250ZW50LmdldEF0dHJpYnV0ZSgnaWQnKSlcbiAgICAkYnV0dG9uLmlubmVySFRNTCA9IHRvZ2dsZUh0bWxcblxuICAgIHRoaXMuJHRvZ2dsZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCgkYnV0dG9uLCB0aGlzLiR0b2dnbGUpXG4gIH1cblxuICBFeHBhbmRlci5wcm90b3R5cGUudG9nZ2xlQ29udGVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKHRoaXMuJHRvZ2dsZUJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgdGhpcy4kdG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpXG4gICAgICB0aGlzLiRjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2FwcC1jLWV4cGFuZGVyX19jb250ZW50LS12aXNpYmxlJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kdG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxuICAgICAgdGhpcy4kY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhcHAtYy1leHBhbmRlcl9fY29udGVudC0tdmlzaWJsZScpXG4gICAgfVxuICB9XG5cbiAgRXhwYW5kZXIucHJvdG90eXBlLmF0dGFjaFNlbGVjdGVkQ291bnRlciA9IGZ1bmN0aW9uIGF0dGFjaFNlbGVjdGVkQ291bnRlciAoc2VsZWN0ZWRTdHJpbmcpIHtcbiAgICB2YXIgJHNlbGVjdGVkQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgICRzZWxlY3RlZENvdW50ZXIuY2xhc3NMaXN0LmFkZCgnYXBwLWMtZXhwYW5kZXJfX3NlbGVjdGVkLWNvdW50ZXInKVxuICAgICRzZWxlY3RlZENvdW50ZXIuY2xhc3NMaXN0LmFkZCgnanMtc2VsZWN0ZWQtY291bnRlcicpXG4gICAgJHNlbGVjdGVkQ291bnRlci5pbm5lckhUTUwgPSBzZWxlY3RlZFN0cmluZ1xuICAgIHRoaXMuJHRvZ2dsZUJ1dHRvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSgkc2VsZWN0ZWRDb3VudGVyLCB0aGlzLiR0b2dnbGVCdXR0b24ubmV4dFNpYmxpbmcpXG4gIH1cblxuICBFeHBhbmRlci5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWRDb3VudCA9IGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkQ291bnQgKCkge1xuICAgIHZhciBzZWxlY3RlZFN0cmluZyA9IHRoaXMuc2VsZWN0ZWRTdHJpbmcoKVxuICAgIHZhciBzZWxlY3RlZFN0cmluZ0VsZW1lbnQgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvcignLmpzLXNlbGVjdGVkLWNvdW50ZXInKVxuICAgIGlmIChzZWxlY3RlZFN0cmluZykge1xuICAgICAgaWYgKHNlbGVjdGVkU3RyaW5nRWxlbWVudCkge1xuICAgICAgICBzZWxlY3RlZFN0cmluZ0VsZW1lbnQuaW5uZXJIVE1MID0gc2VsZWN0ZWRTdHJpbmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXR0YWNoU2VsZWN0ZWRDb3VudGVyKHNlbGVjdGVkU3RyaW5nKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRTdHJpbmdFbGVtZW50KSB7XG4gICAgICBzZWxlY3RlZFN0cmluZ0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxlY3RlZFN0cmluZ0VsZW1lbnQpXG4gICAgfVxuICB9XG5cbiAgRXhwYW5kZXIucHJvdG90eXBlLnNlbGVjdGVkU3RyaW5nID0gZnVuY3Rpb24gc2VsZWN0ZWRTdHJpbmcgKCkge1xuICAgIHRoaXMuZ2V0QWxsU2VsZWN0ZWRFbGVtZW50cygpXG4gICAgdmFyIGNvdW50ID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzLmxlbmd0aFxuICAgIHZhciBzZWxlY3RlZFN0cmluZyA9IGZhbHNlXG4gICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgc2VsZWN0ZWRTdHJpbmcgPSBjb3VudCArICcgc2VsZWN0ZWQnXG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkU3RyaW5nXG4gIH1cblxuICBFeHBhbmRlci5wcm90b3R5cGUuZ2V0QWxsU2VsZWN0ZWRFbGVtZW50cyA9IGZ1bmN0aW9uIGdldEFsbFNlbGVjdGVkRWxlbWVudHMgKCkge1xuICAgIHRoaXMuc2VsZWN0ZWRFbGVtZW50cyA9IFtdXG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRhbGxJbnRlcmFjdGl2ZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy4kYWxsSW50ZXJhY3RpdmVFbGVtZW50c1tpXS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoYXQuc2VsZWN0ZWRFbGVtZW50cy5wdXNoKGkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgTW9kdWxlcy5FeHBhbmRlciA9IEV4cGFuZGVyXG59KSh3aW5kb3cuR09WVUsuTW9kdWxlcylcbiJdfQ==